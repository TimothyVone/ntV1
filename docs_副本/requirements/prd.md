# åŠ å¯†è´§å¸é‡åŒ–äº¤æ˜“ç³»ç»Ÿ äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

## æ–‡æ¡£ä¿¡æ¯
- **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2026-01-18
- **äº§å“ç»ç†**: Claude Code
- **æœ€åæ›´æ–°**: 2026-01-18
- **ç›®æ ‡ç”¨æˆ·**: ä¸ªäººé‡åŒ–äº¤æ˜“è€…(åˆå­¦è€…æ°´å¹³)

---

## 1. éœ€æ±‚æ¦‚è¿°

### 1.1 éœ€æ±‚èƒŒæ™¯
åŠ å¯†è´§å¸å¸‚åœº24/7ä¸é—´æ–­äº¤æ˜“,äººå·¥ç›‘æ§å’Œæ“ä½œéš¾ä»¥ä¿è¯æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚ä¸ªäººæŠ•èµ„è€…å¸Œæœ›é€šè¿‡è‡ªåŠ¨åŒ–äº¤æ˜“ç³»ç»Ÿå®ç°:
- è§£æ”¾äººåŠ›,é¿å…é•¿æ—¶é—´ç›¯ç›˜
- é€šè¿‡é‡åŒ–ç­–ç•¥å…‹æœæƒ…ç»ªå¹²æ‰°
- æé«˜äº¤æ˜“æ‰§è¡Œé€Ÿåº¦å’Œç²¾åº¦
- å®ç°ç¨³å®šæ”¶ç›Š

å½“å‰å¸‚åœºä¸Šçš„é‡åŒ–äº¤æ˜“å¹³å°è¦ä¹ˆè¿‡äºå¤æ‚(å­¦ä¹ æˆæœ¬é«˜),è¦ä¹ˆåŠŸèƒ½å—é™(çµæ´»æ€§å·®)ã€‚åˆå­¦è€…éœ€è¦ä¸€ä¸ª**ç®€å•æ˜“ç”¨ã€åŠŸèƒ½å®Œæ•´ã€å®‰å…¨å¯é **çš„ä¸ªäººé‡åŒ–äº¤æ˜“ç³»ç»Ÿã€‚

### 1.2 éœ€æ±‚ç›®æ ‡

**ä¸šåŠ¡ç›®æ ‡:**
- å®ç°åŠ å¯†è´§å¸äº¤æ˜“çš„è‡ªåŠ¨åŒ–æ‰§è¡Œ
- æ”¯æŒå¤šç­–ç•¥ã€å¤šäº¤æ˜“æ‰€çš„çµæ´»é…ç½®
- æä¾›å®Œå–„çš„é£é™©æ§åˆ¶æœºåˆ¶
- é™ä½é‡åŒ–äº¤æ˜“çš„å­¦ä¹ å’Œä½¿ç”¨é—¨æ§›

**äº§å“ç›®æ ‡ (SMARTåŸåˆ™):**
- **Specific**: æ”¯æŒå¸å®‰å’Œæ¬§æ˜“ä¸¤å¤§ä¸»æµäº¤æ˜“æ‰€,æä¾›3ç§åŸºç¡€ç­–ç•¥
- **Measurable**: ç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ°99%,è®¢å•æ‰§è¡Œå»¶è¿Ÿ<1ç§’
- **Achievable**: åŸºäºæˆç†Ÿçš„CCXTåº“å’ŒPythonç”Ÿæ€,æŠ€æœ¯å¯è¡Œ
- **Relevant**: æ»¡è¶³ä¸ªäººæŠ•èµ„è€…24/7è‡ªåŠ¨äº¤æ˜“éœ€æ±‚
- **Time-bound**: åˆ†3ä¸ªé˜¶æ®µè¿­ä»£,MVPç‰ˆæœ¬3ä¸ªæœˆå†…äº¤ä»˜

### 1.3 ç›®æ ‡ç”¨æˆ·

**ç”¨æˆ·ç”»åƒ:**
- **èº«ä»½**: ä¸ªäººåŠ å¯†è´§å¸æŠ•èµ„è€…
- **ç»éªŒ**: åˆå­¦è€…æ°´å¹³,äº†è§£åŸºæœ¬çš„Pythonç¼–ç¨‹
- **äº¤æ˜“ç»éªŒ**: æœ‰ä¸€å®šçš„åŠ å¯†è´§å¸äº¤æ˜“ç»éªŒ,ä½†ç¼ºä¹é‡åŒ–èƒŒæ™¯
- **æŠ€æœ¯èƒ½åŠ›**: èƒ½å¤Ÿä½¿ç”¨å‘½ä»¤è¡Œ,ç†è§£åŸºæœ¬çš„é…ç½®æ–‡ä»¶
- **ä½¿ç”¨åœºæ™¯**: å®¶åº­ç”µè„‘æˆ–äº‘æœåŠ¡å™¨éƒ¨ç½²,24/7è¿è¡Œ
- **æ ¸å¿ƒè¯‰æ±‚**: ç³»ç»Ÿç¨³å®šã€æ˜“äºé…ç½®ã€é£é™©å¯æ§

---

## 2. ä¸“ä¸šå»ºè®®ä¸æ¨èæ–¹æ¡ˆ

åŸºäºåˆå­¦è€…èƒŒæ™¯,ä»¥ä¸‹æ˜¯æˆ‘çš„ä¸“ä¸šå»ºè®®:

### 2.1 äº¤æ˜“ç­–ç•¥å»ºè®®

#### **è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥**
**æ¨èæ–¹æ¡ˆ: åŒå‡çº¿ + MACDç»„åˆ**
- **åŸå› **: æŒ‡æ ‡ç®€å•æ˜“æ‡‚,ä¿¡å·æ˜ç¡®,é€‚åˆåˆå­¦è€…
- **å…·ä½“å®ç°**:
  - ä¸»æŒ‡æ ‡: EMA(å¿«çº¿12) + EMA(æ…¢çº¿26) + MACD
  - ç¡®è®¤æŒ‡æ ‡: RSI(14) é¿å…è¶…ä¹°è¶…ä¹°åŒº
  - äº¤æ˜“å‘¨æœŸ: 4å°æ—¶Kçº¿(å¹³è¡¡ä¿¡å·é¢‘ç‡å’Œå™ªéŸ³)
  - å…¥åœºæ¡ä»¶:
    - åšå¤š: EMAå¿«çº¿ä¸Šç©¿æ…¢çº¿ AND MACDæŸ±çŠ¶å›¾>0 AND RSI<70
    - åšç©º: EMAå¿«çº¿ä¸‹ç©¿æ…¢çº¿ AND MACDæŸ±çŠ¶å›¾<0 AND RSI>30
  - å‡ºåœºæ¡ä»¶: æ­¢ç›ˆ/æ­¢æŸè§¦å‘ æˆ– åå‘ä¿¡å·
  - ä»“ä½: æ¯æ¬¡ä½¿ç”¨æ€»èµ„é‡‘çš„10%

#### **ç½‘æ ¼äº¤æ˜“ç­–ç•¥**
**æ¨èæ–¹æ¡ˆ: ä¸­æ€§ç½‘æ ¼**
- **åŸå› **: ç­–ç•¥é€»è¾‘ç®€å•,é€‚åˆéœ‡è¡è¡Œæƒ…,é£é™©å¯æ§
- **å…·ä½“å®ç°**:
  - ç½‘æ ¼ç±»å‹: ç­‰å·®ç½‘æ ¼(ä»·æ ¼åŒºé—´å‡åŒ€åˆ†å¸ƒ)
  - ç½‘æ ¼æ•°é‡: 20æ ¼(å¹³è¡¡ç²¾åº¦å’Œæ»‘ç‚¹æˆæœ¬)
  - ä»·æ ¼åŒºé—´: åŸºäºè¿‡å»7å¤©æœ€é«˜æœ€ä½ä»·è‡ªåŠ¨è®¡ç®—
  - å•æ ¼æŠ•å…¥: æ€»èµ„é‡‘çš„50% / 20 = 2.5%/æ ¼
  - åˆ©æ¶¦ç›®æ ‡: å•æ ¼åˆ©æ¶¦ç‡0.5-1%(æ ¹æ®äº¤æ˜“å¯¹è°ƒæ•´)
  - åŠ¨æ€è°ƒæ•´: å½“ä»·æ ¼çªç ´åŒºé—´Â±20%æ—¶é‡æ–°è®¡ç®—ç½‘æ ¼

#### **å¥—åˆ©ç­–ç•¥**
**æ¨èæ–¹æ¡ˆ: è·¨äº¤æ˜“æ‰€å¥—åˆ©(ç®€åŒ–ç‰ˆ)**
- **åŸå› **: é€»è¾‘ç®€å•æ˜äº†,é£é™©ç›¸å¯¹è¾ƒä½
- **å…·ä½“å®ç°**:
  - ç›‘æ§å¯¹: å¸å®‰ vs æ¬§æ˜“çš„ä¸»æµäº¤æ˜“å¯¹(BTC/USDT, ETH/USDTç­‰)
  - ä»·å·®é˜ˆå€¼: >0.5% (è€ƒè™‘æ‰‹ç»­è´¹åçš„å‡€åˆ©æ¶¦)
  - æ‰§è¡Œæ–¹å¼: åŒæ—¶åœ¨ä¸¤ä¸ªäº¤æ˜“æ‰€ä¸‹åå‘è®¢å•(éœ€ä¸¤è¾¹éƒ½æœ‰èµ„é‡‘)
  - é£é™©æ§åˆ¶: å•æ¬¡å¥—åˆ©èµ„é‡‘â‰¤æ€»èµ„é‡‘çš„20%
  - æ³¨æ„: åˆå­¦è€…å»ºè®®ä»"æœŸç°å¥—åˆ©"å¼€å§‹,èµ„é‡‘åˆ©ç”¨ç‡æ›´é«˜

**MVPé˜¶æ®µå»ºè®®**: ä¼˜å…ˆå®ç°è¶‹åŠ¿è·Ÿè¸ªå’Œç½‘æ ¼äº¤æ˜“,å¥—åˆ©ç­–ç•¥ä½œä¸ºv2.0åŠŸèƒ½ã€‚

### 2.2 é£é™©ç®¡ç†å»ºè®®

#### **ä¸‰çº§é£é™©æ§åˆ¶ä½“ç³»**

**ç¬¬ä¸€çº§: å…¨å±€é£é™©æ§åˆ¶**
- æœ€å¤§æ€»æŒä»“: 80%èµ„é‡‘(ä¿ç•™20%å¤‡ç”¨é‡‘)
- æœ€å¤§æ—¥äºæŸ: -5%è§¦å‘ç³»ç»Ÿåœæ­¢
- æœ€å¤§å›æ’¤: -20%è§¦å‘å¼ºåˆ¶å¹³ä»“
- å¹¶å‘è®¢å•é™åˆ¶: æœ€å¤š3ä¸ªæœªå®Œæˆè®¢å•

**ç¬¬äºŒçº§: å•ç¬”äº¤æ˜“é£é™©æ§åˆ¶**
- æ­¢æŸ: å›ºå®š-3%æˆ–ATRçš„1.5å€(åŠ¨æ€)
- æ­¢ç›ˆ: å›ºå®š+6%æˆ–1:2ç›ˆäºæ¯”
- ä»“ä½ç®¡ç†:
  - è¶‹åŠ¿ç­–ç•¥: 10%/ç¬”
  - ç½‘æ ¼ç­–ç•¥: 2.5%/æ ¼
  - å¥—åˆ©ç­–ç•¥: 20%/æ¬¡
- è¿½è¸ªæ­¢æŸ: æ¿€æ´»åå›è°ƒ2%è§¦å‘

**ç¬¬ä¸‰çº§: å¼‚å¸¸ä¿æŠ¤**
- æ»‘ç‚¹ä¿æŠ¤: å®é™…æˆäº¤ä»·ä¸é¢„æœŸä»·åå·®>2%å–æ¶ˆè®¢å•
- æµé‡æ§åˆ¶: APIè°ƒç”¨é¢‘ç‡é™åˆ¶(äº¤æ˜“æ‰€é™åˆ¶çš„80%)
- æ–­çº¿ä¿æŠ¤: ç½‘ç»œæ–­å¼€>5åˆ†é’Ÿè‡ªåŠ¨æš‚åœç­–ç•¥
- å¼‚å¸¸å¤§å•: å•ç¬”é‡‘é¢>æ€»èµ„é‡‘30%éœ€è¦äººå·¥ç¡®è®¤

### 2.3 æ•°æ®ä¸å›æµ‹å»ºè®®

#### **å†å²æ•°æ®ç®¡ç†**
**æ¨èæ–¹æ¡ˆ: æœ¬åœ°SQLite + å¢é‡åŒæ­¥**
- æ•°æ®ç±»å‹: 1åˆ†é’ŸKçº¿ã€4å°æ—¶Kçº¿ã€æ—¥çº¿
- å­˜å‚¨å‘¨æœŸ: ä¿ç•™è¿‘6ä¸ªæœˆè¯¦ç»†æ•°æ®,1å¹´ä»¥ä¸Šæœˆåº¦æ•°æ®
- æ•°æ®æº: å…è´¹ä½¿ç”¨CCXTä»äº¤æ˜“æ‰€è·å–
- åŒæ­¥ç­–ç•¥: æ¯æ—¥å‡Œæ™¨3ç‚¹å¢é‡æ›´æ–°

#### **å›æµ‹åŠŸèƒ½**
**æ¨èæ–¹æ¡ˆ: åŸºäºå†å²æ•°æ®çš„ç®€å•å›æµ‹**
- å›æµ‹æ¡†æ¶: è‡ªå®šä¹‰è½»é‡çº§å›æµ‹å¼•æ“(é¿å…ä½¿ç”¨å¤æ‚åº“)
- å›æµ‹æŒ‡æ ‡:
  - æ€»æ”¶ç›Šç‡
  - å¹´åŒ–æ”¶ç›Šç‡
  - æœ€å¤§å›æ’¤
  - å¤æ™®æ¯”ç‡
  - èƒœç‡
  - ç›ˆäºæ¯”
- å›æµ‹å‘¨æœŸ: è‡³å°‘6ä¸ªæœˆå†å²æ•°æ®
- å‚æ•°ä¼˜åŒ–: ç½‘æ ¼æœç´¢æ³•(ç®€å•æœ‰æ•ˆ)

**MVPé˜¶æ®µ**: å›æµ‹åŠŸèƒ½ä½œä¸ºv1.1è¿­ä»£,å…ˆèšç„¦å®ç›˜äº¤æ˜“ã€‚

### 2.4 ç”¨æˆ·äº¤äº’å»ºè®®

#### **æ¨èæ–¹æ¡ˆ: CLIä¸ºä¸» + Webç›‘æ§ä¸ºè¾…**

**å‘½ä»¤è¡Œç•Œé¢(CLI) - æ ¸å¿ƒæ“ä½œ**
```bash
# ç­–ç•¥ç®¡ç†
python main.py strategy start --name trend_following
python main.py strategy stop --id 123
python main.py strategy list

# æŸ¥è¯¢åŠŸèƒ½
python main.py position list           # æŸ¥çœ‹æŒä»“
python main.py order history --days 7  # å†å²è®¢å•
python main.py profit summary          # æ”¶ç›Šç»Ÿè®¡

# é…ç½®ç®¡ç†
python main.py config set risk.max_position 0.8
python main.py config validate         # éªŒè¯é…ç½®
```

**Webç›‘æ§ç•Œé¢ - å¯è§†åŒ–æŸ¥çœ‹**
- æŠ€æœ¯æ ˆ: Streamlit(åˆå­¦è€…å‹å¥½,ä»£ç é‡å°‘)
- åŠŸèƒ½:
  - å®æ—¶æŒä»“ç›ˆäº
  - è®¢å•çŠ¶æ€ç›‘æ§
  - æ”¶ç›Šæ›²çº¿å›¾è¡¨
  - ç­–ç•¥å¯åœæ§åˆ¶
  - é£é™©æŒ‡æ ‡å±•ç¤º
- è®¿é—®: æœ¬åœ° http://localhost:8501

**é…ç½®æ–‡ä»¶ - ç­–ç•¥å‚æ•°**
```yaml
# config/strategies/trend_following.yaml
strategy:
  name: "è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥"
  type: "trend_following"
  symbol: "BTC/USDT"
  timeframe: "4h"

indicators:
  ema_fast: 12
  ema_slow: 26
  rsi_period: 14

risk:
  max_position: 0.1    # 10%ä»“ä½
  stop_loss: 0.03      # 3%æ­¢æŸ
  take_profit: 0.06    # 6%æ­¢ç›ˆ

notifications:
  dingtalk: true
  trade_execution: true
  risk_alert: true
```

### 2.5 é€šçŸ¥ä¸å‘Šè­¦å»ºè®®

#### **é’‰é’‰é€šçŸ¥åˆ†çº§**

**é€šçŸ¥ç±»å‹ä¸é¢‘ç‡:**
| çº§åˆ« | ç±»å‹ | å†…å®¹ | é¢‘ç‡æ§åˆ¶ |
|------|------|------|----------|
| ğŸ”´ ç´§æ€¥ | é£é™©è§¦å‘ | æ­¢æŸè§¦å‘ã€ç³»ç»Ÿå¼‚å¸¸ã€èµ„é‡‘å¼‚å¸¸ | ç«‹å³å‘é€,æ— é™åˆ¶ |
| ğŸŸ¡ é‡è¦ | äº¤æ˜“æ‰§è¡Œ | è®¢å•æˆäº¤ã€ç­–ç•¥å¯åœ | ç«‹å³å‘é€,æ¯å°æ—¶æœ€å¤š10æ¡ |
| ğŸŸ¢ æ™®é€š | çŠ¶æ€æ›´æ–° | æ¯æ—¥æ”¶ç›Šæ±‡æ€»ã€ç³»ç»Ÿå¥åº·æ£€æŸ¥ | æ¯æ—¥9ç‚¹å’Œ21ç‚¹æ±‡æ€»å‘é€ |

**æ¶ˆæ¯æ ¼å¼ç¤ºä¾‹:**
```
ã€é‡åŒ–äº¤æ˜“ç³»ç»Ÿ - ç´§æ€¥å‘Šè­¦ã€‘
â° æ—¶é—´: 2026-01-18 14:30:25
ğŸš¨ é£é™©ç±»å‹: æ­¢æŸè§¦å‘
ğŸ“Š äº¤æ˜“å¯¹: BTC/USDT
ğŸ’° äºæŸ: -3.2% (-$320)
ğŸ“ˆ å½“å‰ä»·æ ¼: $42,500
ğŸ”” ç­–ç•¥ID: trend_following_001
```

**å…æ‰“æ‰°æ—¶æ®µ:**
- å‡Œæ™¨1ç‚¹-6ç‚¹: ä»…å‘é€ç´§æ€¥å‘Šè­¦
- å…¶ä»–æ—¶é—´: å…¨éƒ¨å‘é€

### 2.6 ç³»ç»Ÿæ¶æ„å»ºè®®

#### **éƒ¨ç½²ç¯å¢ƒæ¨è**
**é¦–é€‰æ–¹æ¡ˆ: äº‘æœåŠ¡å™¨ (é˜¿é‡Œäº‘/è…¾è®¯äº‘)**
- é…ç½®: 2æ ¸4GB,è¶³å¤Ÿè¿è¡Œ3-5ä¸ªç­–ç•¥
- å¸¦å®½: 1Mbps(äº¤æ˜“æ•°æ®é‡å°)
- ç³»ç»Ÿ: Ubuntu 22.04 LTS
- æˆæœ¬: çº¦Â¥100/æœˆ
- ä¼˜åŠ¿: ç¨³å®š24/7è¿è¡Œ,ç½‘ç»œç¨³å®š,å¯è¿œç¨‹è®¿é—®

**å¤‡é€‰æ–¹æ¡ˆ: æœ¬åœ°ç”µè„‘ (Windows/Mac/Linux)**
- é€‚ç”¨: é¢„ç®—ç´§å¼ ,çŸ­æœŸæµ‹è¯•
- è¦æ±‚: ç”µè„‘éœ€ä¿æŒå¼€æœºå’Œè”ç½‘
- é£é™©: å®¶åº­ç½‘ç»œä¸ç¨³å®š,æ–­ç”µé£é™©

#### **ç³»ç»Ÿæ¶æ„è®¾è®¡**

```mermaid
graph TB
    A[ç”¨æˆ·] --> B[Webç›‘æ§ç•Œé¢<br/>Streamlit]
    A --> C[CLIå‘½ä»¤è¡Œ]

    C --> D[ç­–ç•¥è°ƒåº¦å™¨<br/>Scheduler]
    B --> D

    D --> E[ç­–ç•¥å¼•æ“å±‚]
    E --> E1[è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥]
    E --> E2[ç½‘æ ¼äº¤æ˜“ç­–ç•¥]
    E --> E3[å¥—åˆ©ç­–ç•¥]

    E1 --> F[é£é™©ç®¡ç†æ¨¡å—]
    E2 --> F
    E3 --> F

    F --> G[è®¢å•æ‰§è¡Œå¼•æ“<br/>CCXT]
    G --> H[å¸å®‰äº¤æ˜“æ‰€]
    G --> I[æ¬§æ˜“äº¤æ˜“æ‰€]

    F --> J[æ•°æ®ç®¡ç†æ¨¡å—]
    J --> K[(SQLiteæ•°æ®åº“)]
    J --> L[å†å²æ•°æ®æ–‡ä»¶]

    F --> M[é€šçŸ¥æœåŠ¡]
    M --> N[é’‰é’‰æœºå™¨äºº]

    O[é…ç½®ç®¡ç†] --> D
    O --> E
    O --> F
```

#### **æ¨¡å—è¯´æ˜**

**æ ¸å¿ƒæ¨¡å—:**
1. **ç­–ç•¥è°ƒåº¦å™¨**: è´Ÿè´£ç­–ç•¥çš„å¯åœã€è°ƒåº¦ã€çŠ¶æ€ç›‘æ§
2. **ç­–ç•¥å¼•æ“**: å„ç­–ç•¥çš„ç‹¬ç«‹å®ç°,ä¾¿äºæ‰©å±•
3. **é£é™©ç®¡ç†**: ç»Ÿä¸€çš„é£é™©æ§åˆ¶,ä¸‰çº§ä¿æŠ¤æœºåˆ¶
4. **è®¢å•æ‰§è¡Œ**: åŸºäºCCXTçš„ç»Ÿä¸€è®¢å•æ¥å£
5. **æ•°æ®ç®¡ç†**: Kçº¿æ•°æ®ã€è®¢å•æ•°æ®ã€é…ç½®æ•°æ®
6. **é€šçŸ¥æœåŠ¡**: é’‰é’‰æ¶ˆæ¯æ¨é€
7. **Webç›‘æ§**: Streamlitå®ç°çš„å¯è§†åŒ–ç•Œé¢
8. **CLIå·¥å…·**: å‘½ä»¤è¡Œç®¡ç†å·¥å…·

### 2.7 å®‰å…¨æ€§å»ºè®®

#### **APIå¯†é’¥ç®¡ç†**
- **å­˜å‚¨æ–¹å¼**: åŠ å¯†å­˜å‚¨,ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–åŠ å¯†é…ç½®æ–‡ä»¶
- **æƒé™è®¾ç½®**:
  - âŒ ç¦ç”¨: æç°æƒé™
  - âœ… å¯ç”¨: ç°è´§äº¤æ˜“ã€è¯»å–æƒé™
- **IPç™½åå•**: åœ¨äº¤æ˜“æ‰€è®¾ç½®å…è®¸çš„IPåœ°å€
- **å¯†é’¥è½®æ¢**: æ¯3ä¸ªæœˆæ›´æ¢ä¸€æ¬¡APIå¯†é’¥

#### **èµ„é‡‘å®‰å…¨**
- **åˆ†è´¦æˆ·ç®¡ç†**:
  - å»ºè®®: ä½¿ç”¨ä¸“é—¨çš„äº¤æ˜“è´¦æˆ·,ä¸è¦æ”¾å…¨éƒ¨èµ„é‡‘
  - åˆå­¦è€…: å…ˆç”¨å°é¢èµ„é‡‘æµ‹è¯•(å¦‚$500-1000)
- **é£é™©æç¤º**: ç³»ç»Ÿå¯åŠ¨æ—¶æ˜¾ç¤ºé£é™©æç¤º
- **æ“ä½œå®¡è®¡**: æ‰€æœ‰å…³é”®æ“ä½œè®°å½•æ—¥å¿—

### 2.8 MVPèŒƒå›´å»ºè®®

#### **ç¬¬ä¸€é˜¶æ®µ (MVP - 1.5ä¸ªæœˆ)**
**å¿…é¡»æœ‰:**
- âœ… æ”¯æŒå¸å®‰å’Œæ¬§æ˜“çš„åŸºç¡€è¿æ¥
- âœ… è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥(ç®€åŒ–ç‰ˆ)
- âœ… ç½‘æ ¼äº¤æ˜“ç­–ç•¥(åŸºç¡€ç‰ˆ)
- âœ… ä¸‰çº§é£é™©æ§åˆ¶
- âœ… é’‰é’‰é€šçŸ¥(ç´§æ€¥å’Œé‡è¦çº§åˆ«)
- âœ… CLIå‘½ä»¤è¡Œå·¥å…·
- âœ… åŸºç¡€æ—¥å¿—å’Œé”™è¯¯å¤„ç†
- âœ… é…ç½®æ–‡ä»¶ç®¡ç†

#### **ç¬¬äºŒé˜¶æ®µ (v1.1 - 1ä¸ªæœˆ)**
**åŠŸèƒ½å¢å¼º:**
- âœ… Webç›‘æ§ç•Œé¢(Streamlit)
- âœ… å›æµ‹åŠŸèƒ½
- âœ… å‚æ•°ä¼˜åŒ–
- âœ… æ›´è¯¦ç»†çš„äº¤æ˜“ç»Ÿè®¡
- âœ… ç³»ç»Ÿå¥åº·æ£€æŸ¥

#### **ç¬¬ä¸‰é˜¶æ®µ (v2.0 - 1.5ä¸ªæœˆ)**
**é«˜çº§åŠŸèƒ½:**
- âœ… å¥—åˆ©ç­–ç•¥
- âœ… æ›´å¤æ‚çš„æŠ€æœ¯æŒ‡æ ‡
- âœ… ç­–ç•¥ç»„åˆç®¡ç†
- âœ… ç§»åŠ¨ç«¯é€šçŸ¥(å¾®ä¿¡/Telegram)
- âœ… äº‘ç«¯æ•°æ®å¤‡ä»½

### 2.9 å¼€å‘å·¥å…·æ¨è

**å¼€å‘ç¯å¢ƒ:**
- Python 3.10+
- IDE: VSCode(å…è´¹,æ’ä»¶ä¸°å¯Œ)
- ç‰ˆæœ¬æ§åˆ¶: Git + GitHub

**æ ¸å¿ƒä¾èµ–åº“:**
```
ccxt==4.0.0          # äº¤æ˜“æ‰€æ¥å£
pandas==2.1.0        # æ•°æ®å¤„ç†
numpy==1.24.0        # æ•°å€¼è®¡ç®—
sqlalchemy==2.0.0    # æ•°æ®åº“ORM
streamlit==1.28.0    # Webç•Œé¢
pyyaml==6.0          # é…ç½®æ–‡ä»¶
requests==2.31.0     # HTTPè¯·æ±‚
schedule==1.2.0      # ä»»åŠ¡è°ƒåº¦
loguru==0.7.0        # æ—¥å¿—ç®¡ç†
python-dotenv==1.0.0 # ç¯å¢ƒå˜é‡
cryptography==41.0.0 # åŠ å¯†è§£å¯†
```

---

## 3. åŠŸèƒ½éœ€æ±‚è¯¦ç»†è¯´æ˜

### 3.1 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 3.1.1 äº¤æ˜“æ‰€è¿æ¥æ¨¡å—

**åŠŸèƒ½æè¿°:**
å»ºç«‹ä¸å¸å®‰å’Œæ¬§æ˜“äº¤æ˜“æ‰€çš„ç¨³å®šè¿æ¥,æä¾›ç»Ÿä¸€çš„äº¤æ˜“æ¥å£ã€‚

**åŠŸèƒ½è¦ç‚¹:**
- æ”¯æŒå¸å®‰ç°è´§äº¤æ˜“API
- æ”¯æŒæ¬§æ˜“ç°è´§äº¤æ˜“API
- è‡ªåŠ¨é‡è¿æœºåˆ¶(æ–­çº¿å30ç§’å†…é‡è¿)
- APIé™æµä¿æŠ¤(ä¸è¶…è¿‡äº¤æ˜“æ‰€é™åˆ¶çš„80%)
- è¿æ¥çŠ¶æ€å®æ—¶ç›‘æ§

**æ¥å£è®¾è®¡:**
```python
class ExchangeConnector:
    def __init__(self, exchange_id: str, api_key: str, secret: str):
        """åˆå§‹åŒ–äº¤æ˜“æ‰€è¿æ¥"""

    def connect(self) -> bool:
        """å»ºç«‹è¿æ¥"""

    def get_balance(self) -> dict:
        """è·å–è´¦æˆ·ä½™é¢"""

    def get_ticker(self, symbol: str) -> dict:
        """è·å–å®æ—¶ä»·æ ¼"""

    def get_ohlcv(self, symbol: str, timeframe: str) -> list:
        """è·å–Kçº¿æ•°æ®"""

    def create_order(self, symbol: str, type: str, side: str, amount: float) -> dict:
        """åˆ›å»ºè®¢å•"""

    def cancel_order(self, order_id: str) -> bool:
        """å–æ¶ˆè®¢å•"""

    def get_order_status(self, order_id: str) -> dict:
        """æŸ¥è¯¢è®¢å•çŠ¶æ€"""
```

**æ•°æ®è¦æ±‚:**
- APIå¯†é’¥åŠ å¯†å­˜å‚¨
- è¿æ¥è¶…æ—¶æ—¶é—´: 10ç§’
- å¿ƒè·³æ£€æµ‹: æ¯30ç§’ä¸€æ¬¡

---

#### 3.1.2 è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥

**åŠŸèƒ½æè¿°:**
åŸºäºåŒå‡çº¿å’ŒMACDæŒ‡æ ‡çš„è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥,è‡ªåŠ¨è¯†åˆ«è¶‹åŠ¿å¹¶æ‰§è¡Œäº¤æ˜“ã€‚

**ç”¨æˆ·æ•…äº‹:**
ä½œä¸ºä¸ªäººæŠ•èµ„è€…,æˆ‘å¸Œæœ›ç³»ç»Ÿèƒ½è‡ªåŠ¨è¯†åˆ«å¸‚åœºè¶‹åŠ¿,åœ¨è¶‹åŠ¿å½¢æˆæ—¶è‡ªåŠ¨å…¥åœº,è¶‹åŠ¿åè½¬æ—¶è‡ªåŠ¨å‡ºåœº,ä»è€Œè·å¾—è¶‹åŠ¿æ”¶ç›Šã€‚

**ç­–ç•¥é€»è¾‘:**
```mermaid
flowchart TD
    A[å¼€å§‹] --> B[è·å–Kçº¿æ•°æ®]
    B --> C[è®¡ç®—æŠ€æœ¯æŒ‡æ ‡]
    C --> D{EMAå¿«çº¿ > EMAæ…¢çº¿?}
    D -->|æ˜¯| E{MACDæŸ±çŠ¶å›¾ > 0?}
    D -->|å¦| F{MACDæŸ±çŠ¶å›¾ < 0?}

    E -->|æ˜¯| G{RSI < 70?}
    E -->|å¦| H[æ— ä¿¡å·,ç­‰å¾…]

    F -->|æ˜¯| I{RSI > 30?}
    F -->|å¦| H

    G -->|æ˜¯| J[åšå¤šä¿¡å·]
    G -->|å¦| H

    I -->|æ˜¯| K[åšç©ºä¿¡å·]
    I -->|å¦| H

    J --> L{é£é™©æ£€æŸ¥é€šè¿‡?}
    K --> L

    L -->|æ˜¯| M[æ‰§è¡Œä¹°å…¥/å–å‡º]
    L -->|å¦| N[æ‹’ç»äº¤æ˜“,è®°å½•æ—¥å¿—]

    M --> O{æ˜¯å¦æ­¢ç›ˆ/æ­¢æŸ?}
    N --> H

    O -->|æ˜¯| P[å¹³ä»“]
    O -->|å¦| H

    P --> H
    H --> Q[ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸ]
    Q --> B
```

**åŠŸèƒ½è¦ç‚¹:**
1. **æŒ‡æ ‡è®¡ç®—**
   - EMA(12)ã€EMA(26)
   - MACDçº¿ã€ä¿¡å·çº¿ã€æŸ±çŠ¶å›¾
   - RSI(14)

2. **å…¥åœºæ¡ä»¶(åšå¤š)**
   - EMA(12) ä¸Šç©¿ EMA(26)
   - MACDæŸ±çŠ¶å›¾ > 0
   - RSI < 70 (é¿å…è¶…ä¹°)
   - å½“å‰æ— æŒä»“

3. **å…¥åœºæ¡ä»¶(åšç©º)**
   - EMA(12) ä¸‹ç©¿ EMA(26)
   - MACDæŸ±çŠ¶å›¾ < 0
   - RSI > 30 (é¿å…è¶…å–)
   - å½“å‰æ— æŒä»“

4. **å‡ºåœºæ¡ä»¶**
   - æ­¢ç›ˆè§¦å‘: +6%
   - æ­¢æŸè§¦å‘: -3%
   - åå‘ä¿¡å·å‡ºç°

5. **ä»“ä½ç®¡ç†**
   - å•ç¬”ä»“ä½: æ€»èµ„é‡‘çš„10%
   - æœ€å¤§æŒä»“: 2ä¸ªäº¤æ˜“å¯¹

**é…ç½®å‚æ•°:**
```yaml
trend_following:
  symbols:
    - BTC/USDT
    - ETH/USDT
  timeframe: 4h
  indicators:
    ema_fast: 12
    ema_slow: 26
    rsi_period: 14
    rsi_overbought: 70
    rsi_oversold: 30
  risk:
    position_size: 0.1      # 10%
    stop_loss: 0.03         # 3%
    take_profit: 0.06       # 6%
    max_positions: 2
```

**æ•°æ®è¦æ±‚:**
- Kçº¿æ•°æ®: è‡³å°‘100æ ¹4å°æ—¶Kçº¿
- æ•°æ®æ›´æ–°é¢‘ç‡: æ¯4å°æ—¶æ£€æŸ¥ä¸€æ¬¡
- å†å²æ•°æ®ä¿å­˜: 6ä¸ªæœˆ

---

#### 3.1.3 ç½‘æ ¼äº¤æ˜“ç­–ç•¥

**åŠŸèƒ½æè¿°:**
åœ¨æŒ‡å®šä»·æ ¼åŒºé—´å†…è®¾ç½®ç­‰å·®ç½‘æ ¼,è‡ªåŠ¨ä½ä¹°é«˜å–,èµšå–éœ‡è¡è¡Œæƒ…æ”¶ç›Šã€‚

**ç”¨æˆ·æ•…äº‹:**
ä½œä¸ºæŠ•èµ„è€…,æˆ‘å¸Œæœ›åœ¨ä»·æ ¼æ¨ªç›˜éœ‡è¡æ—¶,ç³»ç»Ÿèƒ½è‡ªåŠ¨åœ¨ä½ä»·ä¹°å…¥ã€é«˜ä»·å–å‡º,é€šè¿‡é¢‘ç¹äº¤æ˜“èµšå–å·®ä»·ã€‚

**ç­–ç•¥é€»è¾‘:**
```mermaid
flowchart TD
    A[å¯åŠ¨ç­–ç•¥] --> B[è®¡ç®—ä»·æ ¼åŒºé—´]
    B --> C[ç”Ÿæˆç½‘æ ¼è®¢å•]
    C --> D[ç›‘æ§ä»·æ ¼å˜åŠ¨]

    D --> E{ä»·æ ¼è§¦åŠç½‘æ ¼çº¿?}
    E -->|æ˜¯| F{æ˜¯å¦æœ‰å¯¹åº”è®¢å•?}
    E -->|å¦| D

    F -->|æ˜¯| G[æ‰§è¡Œè®¢å•]
    F -->|å¦| H[ç”Ÿæˆæ–°è®¢å•]

    G --> I{è®¢å•æˆäº¤?}
    H --> J[æŒ‚å•ç­‰å¾…]

    I -->|æ˜¯| K[è®¡ç®—åˆ©æ¶¦]
    I -->|å¦| L[è®°å½•å¤±è´¥æ—¥å¿—]

    K --> M{ä»·æ ¼çªç ´åŒºé—´?}
    L --> D

    M -->|æ˜¯| N[é‡æ–°è®¡ç®—åŒºé—´]
    M -->|å¦| D

    N --> B
    J --> D
```

**åŠŸèƒ½è¦ç‚¹:**
1. **åŒºé—´è®¡ç®—**
   - åŸºäºè¿‡å»7å¤©æœ€é«˜ä»·å’Œæœ€ä½ä»·
   - ä¸Šç•Œ = æœ€é«˜ä»· * 1.05
   - ä¸‹ç•Œ = æœ€ä½ä»· * 0.95

2. **ç½‘æ ¼ç”Ÿæˆ**
   - ç½‘æ ¼æ•°é‡: 20æ ¼
   - ç½‘æ ¼ç±»å‹: ç­‰å·®ç½‘æ ¼
   - å•æ ¼ä»·æ ¼ = (ä¸Šç•Œ - ä¸‹ç•Œ) / 20
   - æ¯æ ¼æŠ•å…¥: æ€»èµ„é‡‘50% / 20

3. **è®¢å•ç®¡ç†**
   - åœ¨æ¯ä¸ªç½‘æ ¼çº¿æŒ‚ä¹°å•å’Œå–å•
   - ä¹°å•æˆäº¤åç«‹å³åœ¨ä¸Šä¸€æ ¼æŒ‚å–å•
   - å–å•æˆäº¤åç«‹å³åœ¨ä¸‹ä¸€æ ¼æŒ‚ä¹°å•
   - ä¿æŒç½‘æ ¼å§‹ç»ˆå®Œæ•´

4. **åŠ¨æ€è°ƒæ•´**
   - å½“ä»·æ ¼çªç ´åŒºé—´Â±20%æ—¶é‡æ–°è®¡ç®—
   - å–æ¶ˆæ‰€æœ‰æœªæˆäº¤è®¢å•
   - é‡æ–°ç”Ÿæˆç½‘æ ¼

5. **åˆ©æ¶¦ç›®æ ‡**
   - å•æ ¼åˆ©æ¶¦ç‡: 0.5-1%
   - æ ¹æ®äº¤æ˜“å¯¹æ‰‹ç»­è´¹è°ƒæ•´
   - BTC/USDT: 0.5%
   - å…¶ä»–: 1%

**é…ç½®å‚æ•°:**
```yaml
grid_trading:
  symbols:
    - BTC/USDT
  timeframe: 1h
  grid:
    count: 20               # ç½‘æ ¼æ•°é‡
    type: arithmetic        # ç­‰å·®ç½‘æ ¼
    range_days: 7           # åŒºé—´è®¡ç®—å¤©æ•°
    range_multiplier: 1.05  # åŒºé—´æ‰©å¤§ç³»æ•°
    rebalance_threshold: 0.2 # é‡æ–°å¹³è¡¡é˜ˆå€¼
  risk:
    total_investment: 0.5   # æ€»æŠ•å…¥50%
    profit_per_grid: 0.005  # å•æ ¼åˆ©æ¶¦0.5%
  fees:
    maker: 0.001            # æŒ‚å•æ‰‹ç»­è´¹0.1%
    taker: 0.001            # åƒå•æ‰‹ç»­è´¹0.1%
```

**æ•°æ®è¦æ±‚:**
- éœ€è¦7å¤©å†å²Kçº¿æ•°æ®
- å®æ—¶ä»·æ ¼ç›‘æ§
- è®¢å•çŠ¶æ€å®æ—¶æ›´æ–°

---

#### 3.1.4 é£é™©ç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°:**
ç»Ÿä¸€çš„ä¸‰çº§é£é™©æ§åˆ¶ä½“ç³»,ä¿æŠ¤èµ„é‡‘å®‰å…¨ã€‚

**é£é™©æ§åˆ¶æµç¨‹:**
```mermaid
flowchart TD
    A[äº¤æ˜“ä¿¡å·] --> B[ç¬¬ä¸€çº§: å…¨å±€é£é™©æ£€æŸ¥]
    B --> C{æ€»æŒä»“ < 80%?}
    C -->|å¦| D[æ‹’ç»äº¤æ˜“]
    C -->|æ˜¯| E{å½“æ—¥äºæŸ < 5%?}

    E -->|å¦| F[åœæ­¢æ‰€æœ‰ç­–ç•¥]
    E -->|æ˜¯| G{æœ€å¤§å›æ’¤ < 20%?}

    G -->|å¦| H[å¼ºåˆ¶å¹³ä»“]
    G -->|æ˜¯| I[ç¬¬äºŒçº§: å•ç¬”é£é™©æ£€æŸ¥]

    I --> J{å•ç¬”ä»“ä½ < 10%?}
    J -->|å¦| D
    J -->|æ˜¯| K{æ­¢æŸæ­¢ç›ˆè®¾ç½®?}

    K -->|å¦| D
    K -->|æ˜¯| L[ç¬¬ä¸‰çº§: å¼‚å¸¸æ£€æŸ¥]

    L --> M{æ»‘ç‚¹ < 2%?}
    M -->|å¦| D
    M -->|æ˜¯| N{APIé¢‘ç‡æ­£å¸¸?}

    N -->|å¦| D
    N -->|æ˜¯| O[å…è®¸äº¤æ˜“]

    D --> P[è®°å½•æ‹’ç»åŸå› ]
    F --> Q[å‘é€ç´§æ€¥å‘Šè­¦]
    H --> Q
```

**åŠŸèƒ½è¦ç‚¹:**

**ç¬¬ä¸€çº§: å…¨å±€é£é™©æ§åˆ¶**
- æ€»æŒä»“ä¸Šé™: 80%
- å•æ—¥æœ€å¤§äºæŸ: 5%
- æœ€å¤§å›æ’¤é™åˆ¶: 20%
- å¹¶å‘è®¢å•é™åˆ¶: 3ä¸ª

**ç¬¬äºŒçº§: å•ç¬”äº¤æ˜“é£é™©**
- ä»“ä½é™åˆ¶: æ ¹æ®ç­–ç•¥ç±»å‹
- æ­¢æŸè®¾ç½®: -3%æˆ–ATR*1.5
- æ­¢ç›ˆè®¾ç½®: +6%æˆ–1:2ç›ˆäºæ¯”
- è¿½è¸ªæ­¢æŸ: æ¿€æ´»åå›è°ƒ2%

**ç¬¬ä¸‰çº§: å¼‚å¸¸ä¿æŠ¤**
- æ»‘ç‚¹ä¿æŠ¤: >2%å–æ¶ˆè®¢å•
- æµé‡æ§åˆ¶: APIé™æµ80%
- æ–­çº¿ä¿æŠ¤: æ–­å¼€5åˆ†é’Ÿæš‚åœ
- å¤§å•ç¡®è®¤: >30%éœ€äººå·¥ç¡®è®¤

**å®ç°ä»£ç ç»“æ„:**
```python
class RiskManager:
    def check_global_risk(self) -> tuple[bool, str]:
        """æ£€æŸ¥å…¨å±€é£é™©"""

    def check_trade_risk(self, trade: Trade) -> tuple[bool, str]:
        """æ£€æŸ¥å•ç¬”äº¤æ˜“é£é™©"""

    def check_anomaly(self, order: Order) -> tuple[bool, str]:
        """æ£€æŸ¥å¼‚å¸¸æƒ…å†µ"""

    def calculate_position_size(self, strategy: str, capital: float) -> float:
        """è®¡ç®—ä»“ä½å¤§å°"""

    def set_stop_loss(self, entry_price: float, side: str) -> float:
        """è®¡ç®—æ­¢æŸä»·æ ¼"""

    def set_take_profit(self, entry_price: float, side: str) -> float:
        """è®¡ç®—æ­¢ç›ˆä»·æ ¼"""
```

**å‘Šè­¦æœºåˆ¶:**
- é£é™©è§¦å‘æ—¶ç«‹å³å‘é€é’‰é’‰å‘Šè­¦
- å‘Šè­¦çº§åˆ«: ğŸ”´ ç´§æ€¥
- å‘Šè­¦å†…å®¹: è§¦å‘åŸå› ã€å½“å‰çŠ¶æ€ã€å»ºè®®æ“ä½œ

---

#### 3.1.5 è®¢å•æ‰§è¡Œå¼•æ“

**åŠŸèƒ½æè¿°:**
ç»Ÿä¸€çš„è®¢å•æ‰§è¡Œæ¥å£,å¤„ç†æ‰€æœ‰äº¤æ˜“æ‰€çš„è®¢å•æ“ä½œã€‚

**åŠŸèƒ½è¦ç‚¹:**
1. **è®¢å•åˆ›å»º**
   - æ”¯æŒå¸‚ä»·å•å’Œé™ä»·å•
   - è‡ªåŠ¨è®¡ç®—æœ€ä½³ä»·æ ¼
   - è®¢å•ç¡®è®¤æœºåˆ¶

2. **è®¢å•ç›‘æ§**
   - å®æ—¶ç›‘æ§è®¢å•çŠ¶æ€
   - éƒ¨åˆ†æˆäº¤å¤„ç†
   - è®¢å•è¶…æ—¶å–æ¶ˆ

3. **è®¢å•ä¿®æ”¹**
   - ä¿®æ”¹è®¢å•ä»·æ ¼
   - ä¿®æ”¹è®¢å•æ•°é‡

4. **æ‰¹é‡æ“ä½œ**
   - æ‰¹é‡å–æ¶ˆè®¢å•
   - æ‰¹é‡æŸ¥è¯¢çŠ¶æ€

**å®ç°ä»£ç :**
```python
class OrderEngine:
    def create_market_order(self, symbol: str, side: str, amount: float) -> dict:
        """åˆ›å»ºå¸‚ä»·å•"""

    def create_limit_order(self, symbol: str, side: str, amount: float, price: float) -> dict:
        """åˆ›å»ºé™ä»·å•"""

    def cancel_order(self, order_id: str, symbol: str) -> bool:
        """å–æ¶ˆè®¢å•"""

    def cancel_all_orders(self, symbol: str) -> int:
        """å–æ¶ˆæ‰€æœ‰è®¢å•"""

    def get_order_status(self, order_id: str, symbol: str) -> dict:
        """è·å–è®¢å•çŠ¶æ€"""

    def monitor_order(self, order_id: str, callback: callable):
        """ç›‘æ§è®¢å•çŠ¶æ€"""
```

**æ•°æ®è¦æ±‚:**
- æ‰€æœ‰è®¢å•è®°å½•åˆ°æ•°æ®åº“
- è®¢å•çŠ¶æ€å®æ—¶æ›´æ–°
- è®¢å•å¤±è´¥è¯¦ç»†æ—¥å¿—

---

#### 3.1.6 æ•°æ®ç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°:**
ç®¡ç†ç³»ç»Ÿæ‰€æœ‰æ•°æ®,åŒ…æ‹¬Kçº¿æ•°æ®ã€äº¤æ˜“æ•°æ®ã€é…ç½®æ•°æ®ã€‚

**æ•°æ®åº“è®¾è®¡:**

**è¡¨1: klines (Kçº¿æ•°æ®)**
```sql
CREATE TABLE klines (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    exchange VARCHAR(20) NOT NULL,
    symbol VARCHAR(20) NOT NULL,
    timeframe VARCHAR(10) NOT NULL,
    timestamp INTEGER NOT NULL,
    open DECIMAL(20, 8),
    high DECIMAL(20, 8),
    low DECIMAL(20, 8),
    close DECIMAL(20, 8),
    volume DECIMAL(20, 8),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(exchange, symbol, timeframe, timestamp)
);
CREATE INDEX idx_klines_lookup ON klines(exchange, symbol, timeframe, timestamp);
```

**è¡¨2: orders (è®¢å•è®°å½•)**
```sql
CREATE TABLE orders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    exchange VARCHAR(20) NOT NULL,
    order_id VARCHAR(50) UNIQUE,
    symbol VARCHAR(20) NOT NULL,
    type VARCHAR(10),      -- market/limit
    side VARCHAR(10),      -- buy/sell
    amount DECIMAL(20, 8),
    price DECIMAL(20, 8),
    filled DECIMAL(20, 8),
    status VARCHAR(20),    -- open/closed/canceled
    strategy VARCHAR(50),
    reason TEXT,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

**è¡¨3: positions (æŒä»“è®°å½•)**
```sql
CREATE TABLE positions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    strategy VARCHAR(50) NOT NULL,
    exchange VARCHAR(20) NOT NULL,
    symbol VARCHAR(20) NOT NULL,
    side VARCHAR(10),      -- long/short
    entry_price DECIMAL(20, 8),
    current_price DECIMAL(20, 8),
    amount DECIMAL(20, 8),
    unrealized_pnl DECIMAL(20, 8),
    opened_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

**è¡¨4: trades (äº¤æ˜“è®°å½•)**
```sql
CREATE TABLE trades (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER,
    exchange VARCHAR(20),
    symbol VARCHAR(20),
    side VARCHAR(10),
    price DECIMAL(20, 8),
    amount DECIMAL(20, 8),
    fee DECIMAL(20, 8),
    pnl DECIMAL(20, 8),
    traded_at TIMESTAMP,
    FOREIGN KEY (order_id) REFERENCES orders(id)
);
```

**è¡¨5: strategy_logs (ç­–ç•¥æ—¥å¿—)**
```sql
CREATE TABLE strategy_logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    strategy VARCHAR(50),
    level VARCHAR(20),     -- INFO/WARNING/ERROR
    message TEXT,
    data JSON,
    created_at TIMESTAMP
);
```

**æ•°æ®åŒæ­¥ç­–ç•¥:**
```python
class DataSync:
    def sync_klines(self, exchange: str, symbol: str, timeframe: str):
        """åŒæ­¥Kçº¿æ•°æ®"""
        # è·å–æœ€åæ—¶é—´æˆ³
        last_ts = self.get_last_timestamp(exchange, symbol, timeframe)
        # ä»äº¤æ˜“æ‰€è·å–å¢é‡æ•°æ®
        new_data = self.fetch_klines(exchange, symbol, timeframe, since=last_ts)
        # æ‰¹é‡æ’å…¥æ•°æ®åº“
        self.batch_insert(new_data)

    def sync_daily(self):
        """æ¯æ—¥åŒæ­¥ä»»åŠ¡"""
        # å‡Œæ™¨3ç‚¹æ‰§è¡Œ
        for symbol in self.symbols:
            for timeframe in ['1m', '4h', '1d']:
                self.sync_klines('binance', symbol, timeframe)
                self.sync_klines('okx', symbol, timeframe)
```

---

#### 3.1.7 é€šçŸ¥æœåŠ¡

**åŠŸèƒ½æè¿°:**
é€šè¿‡é’‰é’‰æœºå™¨äººå‘é€ç³»ç»Ÿé€šçŸ¥å’Œå‘Šè­¦ã€‚

**åŠŸèƒ½è¦ç‚¹:**
1. **æ¶ˆæ¯åˆ†ç±»**
   - ğŸ”´ ç´§æ€¥: é£é™©è§¦å‘ã€ç³»ç»Ÿå¼‚å¸¸
   - ğŸŸ¡ é‡è¦: è®¢å•æˆäº¤ã€ç­–ç•¥å¯åœ
   - ğŸŸ¢ æ™®é€š: æ¯æ—¥æ±‡æ€»ã€ç³»ç»ŸçŠ¶æ€

2. **é¢‘ç‡æ§åˆ¶**
   - ç´§æ€¥æ¶ˆæ¯: ç«‹å³å‘é€,æ— é™åˆ¶
   - é‡è¦æ¶ˆæ¯: ç«‹å³å‘é€,æ¯å°æ—¶æœ€å¤š10æ¡
   - æ™®é€šæ¶ˆæ¯: å®šæ—¶æ±‡æ€»

3. **æ¶ˆæ¯æ¨¡æ¿**
   - äº¤æ˜“æˆäº¤é€šçŸ¥
   - é£é™©å‘Šè­¦é€šçŸ¥
   - æ¯æ—¥æ”¶ç›Šæ±‡æ€»
   - ç³»ç»Ÿå¥åº·æ£€æŸ¥

**å®ç°ä»£ç :**
```python
class NotificationService:
    def __init__(self, webhook_url: str):
        self.webhook_url = webhook_url
        self.message_queue = []

    def send_urgent(self, title: str, content: dict):
        """å‘é€ç´§æ€¥æ¶ˆæ¯"""
        message = self._format_urgent(title, content)
        self._send(message)

    def send_important(self, title: str, content: dict):
        """å‘é€é‡è¦æ¶ˆæ¯"""
        if self._check_rate_limit():
            message = self._format_important(title, content)
            self._send(message)

    def send_summary(self, title: str, content: dict):
        """å‘é€æ±‡æ€»æ¶ˆæ¯"""
        self.message_queue.append((title, content))

    def send_daily_summary(self):
        """å‘é€æ¯æ—¥æ±‡æ€»"""
        if len(self.message_queue) > 0:
            message = self._format_summary(self.message_queue)
            self._send(message)
            self.message_queue = []

    def _format_urgent(self, title: str, content: dict) -> str:
        """æ ¼å¼åŒ–ç´§æ€¥æ¶ˆæ¯"""
        return f"""
ã€é‡åŒ–äº¤æ˜“ç³»ç»Ÿ - {title}ã€‘
â° æ—¶é—´: {content['time']}
ğŸš¨ å‘Šè­¦çº§åˆ«: ç´§æ€¥
ğŸ“Š äº¤æ˜“å¯¹: {content.get('symbol', 'N/A')}
ğŸ’° é‡‘é¢: {content.get('amount', 'N/A')}
ğŸ“ˆ ä»·æ ¼: {content.get('price', 'N/A')}
ğŸ”” ç­–ç•¥: {content.get('strategy', 'N/A')}
ğŸ’¬ è¯¦æƒ…: {content.get('message', '')}
"""
```

**é’‰é’‰æœºå™¨äººé…ç½®:**
```yaml
notifications:
  dingtalk:
    webhook: "https://oapi.dingtalk.com/robot/send?access_token=xxx"
    secret: "SEC***"  # ç­¾åå¯†é’¥
    enabled: true

  types:
    trade_execution: true
    risk_alert: true
    strategy_status: true
    daily_summary: true

  rate_limit:
    important_per_hour: 10

  schedule:
    daily_summary_time: "09:00,21:00"
    quiet_hours: "01:00-06:00"
```

---

#### 3.1.8 CLIå‘½ä»¤è¡Œå·¥å…·

**åŠŸèƒ½æè¿°:**
æä¾›å‘½ä»¤è¡Œç•Œé¢,æ–¹ä¾¿ç”¨æˆ·ç®¡ç†ç­–ç•¥å’ŒæŸ¥è¯¢ä¿¡æ¯ã€‚

**åŠŸèƒ½æ¨¡å—:**

**1. ç­–ç•¥ç®¡ç†**
```bash
# å¯åŠ¨ç­–ç•¥
python main.py strategy start --name trend_following

# åœæ­¢ç­–ç•¥
python main.py strategy stop --id trend_following_001

# åˆ—å‡ºæ‰€æœ‰ç­–ç•¥
python main.py strategy list

# æŸ¥çœ‹ç­–ç•¥è¯¦æƒ…
python main.py strategy info --id trend_following_001

# ä¿®æ”¹ç­–ç•¥å‚æ•°
python main.py strategy config --id trend_following_001 --key position_size --value 0.15
```

**2. æŸ¥è¯¢åŠŸèƒ½**
```bash
# æŸ¥çœ‹æŒä»“
python main.py position list

# æŸ¥çœ‹å†å²è®¢å•
python main.py order history --days 7 --symbol BTC/USDT

# æŸ¥çœ‹æ”¶ç›Šç»Ÿè®¡
python main.py profit summary --period month

# æŸ¥çœ‹è´¦æˆ·ä½™é¢
python main.py balance
```

**3. é…ç½®ç®¡ç†**
```bash
# éªŒè¯é…ç½®
python main.py config validate

# æŸ¥çœ‹é…ç½®
python main.py config show --key risk.max_position

# ä¿®æ”¹é…ç½®
python main.py config set --key risk.max_position --value 0.8

# é‡ç½®é…ç½®
python main.py config reset --key risk.max_position
```

**4. ç³»ç»Ÿç®¡ç†**
```bash
# å¯åŠ¨ç³»ç»Ÿ
python main.py system start

# åœæ­¢ç³»ç»Ÿ
python main.py system stop

# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
python main.py system status

# æŸ¥çœ‹æ—¥å¿—
python main.py logs --tail 100

# å¥åº·æ£€æŸ¥
python main.py system health
```

**å®ç°æ¡†æ¶:**
ä½¿ç”¨ `click` åº“æ„å»ºCLI:
```python
import click

@click.group()
def cli():
    """é‡åŒ–äº¤æ˜“ç³»ç»Ÿå‘½ä»¤è¡Œå·¥å…·"""
    pass

@cli.group()
def strategy():
    """ç­–ç•¥ç®¡ç†"""
    pass

@strategy.command()
@click.option('--name', required=True, help='ç­–ç•¥åç§°')
def start(name):
    """å¯åŠ¨ç­–ç•¥"""
    # å®ç°é€»è¾‘
    click.echo(f"ç­–ç•¥ {name} å·²å¯åŠ¨")

@strategy.command()
@click.option('--id', required=True, help='ç­–ç•¥ID')
def stop(id):
    """åœæ­¢ç­–ç•¥"""
    # å®ç°é€»è¾‘
    click.echo(f"ç­–ç•¥ {id} å·²åœæ­¢")
```

---

#### 3.1.9 Webç›‘æ§ç•Œé¢

**åŠŸèƒ½æè¿°:**
åŸºäºStreamlitçš„å¯è§†åŒ–ç›‘æ§ç•Œé¢,å®æ—¶æŸ¥çœ‹äº¤æ˜“çŠ¶æ€ã€‚

**åŠŸèƒ½é¡µé¢:**

**1. ä»ªè¡¨ç›˜ (Dashboard)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é‡åŒ–äº¤æ˜“ç³»ç»Ÿç›‘æ§é¢æ¿                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ€»èµ„äº§: $12,500  ä»Šæ—¥æ”¶ç›Š: +$120 (+0.97%)   â”‚
â”‚  æŒä»“æ•°: 2  è¿è¡Œä¸­ç­–ç•¥: 2                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æŒä»“åˆ—è¡¨                                    â”‚
â”‚  BTC/USDT  å¤šå¤´  $5000  +3.2%  ä¹°å…¥: $42000 â”‚
â”‚  ETH/USDT  å¤šå¤´  $3000  -1.5%  ä¹°å…¥: $2200  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æœªå®Œæˆè®¢å•                                  â”‚
â”‚  BTC/USDT  ä¹°å…¥  0.1 BTC  é™ä»· $41800       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç­–ç•¥çŠ¶æ€                                    â”‚
â”‚  âœ“ è¶‹åŠ¿è·Ÿè¸ª  è¿è¡Œä¸­  æœ€åä¿¡å·: 2å°æ—¶å‰      â”‚
â”‚  âœ“ ç½‘æ ¼äº¤æ˜“  è¿è¡Œä¸­  æˆäº¤: 5æ¬¡              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. ç­–ç•¥ç®¡ç†**
- ç­–ç•¥å¯åœæŒ‰é’®
- ç­–ç•¥å‚æ•°è°ƒæ•´
- ç­–ç•¥æ€§èƒ½ç»Ÿè®¡
- ç­–ç•¥æ—¥å¿—æŸ¥çœ‹

**3. äº¤æ˜“åˆ†æ**
- æ”¶ç›Šæ›²çº¿å›¾
- æŒä»“åˆ†å¸ƒé¥¼å›¾
- äº¤æ˜“é‡æŸ±çŠ¶å›¾
- èƒœç‡ç»Ÿè®¡

**4. é£é™©ç›‘æ§**
- æ€»æŒä»“ç‡
- æœ€å¤§å›æ’¤
- å½“æ—¥ç›ˆäº
- é£é™©äº‹ä»¶åˆ—è¡¨

**5. å†å²è®°å½•**
- å†å²è®¢å•è¡¨æ ¼
- äº¤æ˜“è®°å½•è¡¨æ ¼
- ç­–ç•¥æ—¥å¿—
- æ”¯æŒç­›é€‰å’Œå¯¼å‡º

**å®ç°ä»£ç :**
```python
import streamlit as st

st.set_page_config(page_title="é‡åŒ–äº¤æ˜“ç³»ç»Ÿ", layout="wide")

# ä¾§è¾¹æ 
with st.sidebar:
    st.title("å¯¼èˆª")
    page = st.radio("é€‰æ‹©é¡µé¢", ["ä»ªè¡¨ç›˜", "ç­–ç•¥ç®¡ç†", "äº¤æ˜“åˆ†æ", "é£é™©ç›‘æ§", "å†å²è®°å½•"])

# ä¸»é¡µé¢
if page == "ä»ªè¡¨ç›˜":
    st.title("ç³»ç»Ÿä»ªè¡¨ç›˜")

    # æ€»èµ„äº§å¡ç‰‡
    col1, col2, col3, col4 = st.columns(4)
    with col1:
        st.metric("æ€»èµ„äº§", "$12,500", "+$120 (0.97%)")
    with col2:
        st.metric("ä»Šæ—¥æ”¶ç›Š", "+$120", "+0.97%")
    with col3:
        st.metric("æŒä»“æ•°", "2")
    with col4:
        st.metric("è¿è¡Œç­–ç•¥", "2")

    # æŒä»“åˆ—è¡¨
    st.subheader("å½“å‰æŒä»“")
    positions = get_positions()
    st.dataframe(positions)

    # ç­–ç•¥çŠ¶æ€
    st.subheader("ç­–ç•¥çŠ¶æ€")
    strategies = get_strategies()
    for strategy in strategies:
        with st.expander(f"{strategy['name']} - {strategy['status']}"):
            st.write(strategy)
```

**éƒ¨ç½²æ–¹å¼:**
```bash
# å¯åŠ¨Webç•Œé¢
streamlit run web/app.py --server.port 8501

# è®¿é—®åœ°å€
http://localhost:8501
```

---

### 3.2 æ‰©å±•åŠŸèƒ½ (v1.1)

#### 3.2.1 å›æµ‹åŠŸèƒ½
**åŠŸèƒ½æè¿°:**
åŸºäºå†å²æ•°æ®æµ‹è¯•ç­–ç•¥è¡¨ç°ã€‚

**åŠŸèƒ½è¦ç‚¹:**
- é€‰æ‹©ç­–ç•¥å’Œå†å²æ—¶é—´æ®µ
- æ¨¡æ‹Ÿäº¤æ˜“æ‰§è¡Œ
- è®¡ç®—å›æµ‹æŒ‡æ ‡
- ç”Ÿæˆå›æµ‹æŠ¥å‘Š

**å›æµ‹æŒ‡æ ‡:**
- æ€»æ”¶ç›Šç‡
- å¹´åŒ–æ”¶ç›Šç‡
- æœ€å¤§å›æ’¤
- å¤æ™®æ¯”ç‡
- èƒœç‡
- ç›ˆäºæ¯”
- äº¤æ˜“æ¬¡æ•°

**ä½¿ç”¨æ–¹å¼:**
```bash
python main.py backtest --strategy trend_following --start 2024-01-01 --end 2024-12-31
```

#### 3.2.2 å‚æ•°ä¼˜åŒ–
**åŠŸèƒ½æè¿°:**
é€šè¿‡ç½‘æ ¼æœç´¢æ‰¾åˆ°æœ€ä¼˜å‚æ•°ç»„åˆã€‚

**åŠŸèƒ½è¦ç‚¹:**
- å®šä¹‰å‚æ•°æœç´¢ç©ºé—´
- å¹¶è¡Œå›æµ‹å¤šç»„å‚æ•°
- æ’åºå¹¶å±•ç¤ºæœ€ä¼˜ç»“æœ
- å¯¼å‡ºæœ€ä¼˜é…ç½®

---

### 3.3 æœªæ¥è§„åˆ’ (v2.0)

#### 3.3.1 å¥—åˆ©ç­–ç•¥
- è·¨äº¤æ˜“æ‰€å¥—åˆ©
- ä¸‰è§’å¥—åˆ©
- æœŸç°å¥—åˆ©

#### 3.3.2 é«˜çº§åŠŸèƒ½
- å¤šç­–ç•¥ç»„åˆ
- åŠ¨æ€ä»“ä½ç®¡ç†
- æœºå™¨å­¦ä¹ é¢„æµ‹
- ç¤¾åŒºç­–ç•¥åˆ†äº«

---

## 4. éåŠŸèƒ½éœ€æ±‚

### 4.1 æ€§èƒ½è¦æ±‚

| æŒ‡æ ‡ | è¦æ±‚ | è¯´æ˜ |
|------|------|------|
| è®¢å•æ‰§è¡Œå»¶è¿Ÿ | < 1ç§’ | ä»ä¿¡å·åˆ°è®¢å•æäº¤ |
| APIå“åº”æ—¶é—´ | < 500ms | äº¤æ˜“æ‰€APIè°ƒç”¨ |
| æ•°æ®åŒæ­¥é¢‘ç‡ | æ¯åˆ†é’Ÿ | Kçº¿æ•°æ®æ›´æ–° |
| ç³»ç»Ÿå¯ç”¨æ€§ | > 99% | æœˆåº¦ç»Ÿè®¡ |
| å¹¶å‘ç­–ç•¥æ•° | â‰¥ 5ä¸ª | åŒæ—¶è¿è¡Œç­–ç•¥ |

### 4.2 å®‰å…¨è¦æ±‚

1. **APIå¯†é’¥å®‰å…¨**
   - å¯†é’¥åŠ å¯†å­˜å‚¨(AES-256)
   - ä¸åœ¨æ—¥å¿—ä¸­æ˜¾ç¤º
   - å®šæœŸè½®æ¢(3ä¸ªæœˆ)

2. **æƒé™æ§åˆ¶**
   - ç¦ç”¨æç°æƒé™
   - å¯ç”¨IPç™½åå•
   - æ“ä½œå®¡è®¡æ—¥å¿—

3. **æ•°æ®å®‰å…¨**
   - æ•°æ®åº“åŠ å¯†
   - æ•æ„Ÿä¿¡æ¯è„±æ•
   - å®šæœŸå¤‡ä»½

4. **ç½‘ç»œå®‰å…¨**
   - HTTPSé€šä¿¡
   - APIç­¾åéªŒè¯
   - é˜²é‡æ”¾æ”»å‡»

### 4.3 å¯ç”¨æ€§è¦æ±‚

1. **å®¹é”™èƒ½åŠ›**
   - æ–­çº¿è‡ªåŠ¨é‡è¿
   - å¼‚å¸¸è‡ªåŠ¨æ¢å¤
   - æ•°æ®æŒä¹…åŒ–

2. **ç›‘æ§å‘Šè­¦**
   - ç³»ç»Ÿå¥åº·æ£€æŸ¥
   - å¼‚å¸¸å®æ—¶å‘Šè­¦
   - æ€§èƒ½ç›‘æ§

3. **æ—¥å¿—ç®¡ç†**
   - å®Œæ•´æ“ä½œæ—¥å¿—
   - åˆ†çº§æ—¥å¿—(DEBUG/INFO/WARNING/ERROR)
   - æ—¥å¿—è½®è½¬(å•æ–‡ä»¶æœ€å¤§100MB)

### 4.4 å…¼å®¹æ€§è¦æ±‚

1. **æ“ä½œç³»ç»Ÿ**
   - Ubuntu 20.04+ (æ¨è)
   - macOS 11+
   - Windows 10+ (WSL2)

2. **Pythonç‰ˆæœ¬**
   - Python 3.10+
   - Python 3.11 (æ¨è)

3. **æµè§ˆå™¨** (Webç•Œé¢)
   - Chrome 90+
   - Firefox 88+
   - Safari 14+

### 4.5 å¯ç»´æŠ¤æ€§è¦æ±‚

1. **ä»£ç è´¨é‡**
   - PEP 8ä»£ç è§„èŒƒ
   - ç±»å‹æ³¨è§£
   - æ–‡æ¡£æ³¨é‡Š
   - å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 70%

2. **æ–‡æ¡£å®Œæ•´æ€§**
   - APIæ–‡æ¡£
   - ç”¨æˆ·æ‰‹å†Œ
   - éƒ¨ç½²æŒ‡å—
   - æ•…éšœæ’æŸ¥æ‰‹å†Œ

3. **é…ç½®ç®¡ç†**
   - é›†ä¸­é…ç½®
   - ç¯å¢ƒéš”ç¦»
   - é…ç½®éªŒè¯

---

## 5. æ•°æ®éœ€æ±‚

### 5.1 æ•°æ®å®ä½“

```mermaid
erDiagram
    EXCHANGE ||--o{ SYMBOL : has
    SYMBOL ||--o{ KLINES : has
    SYMBOL ||--o{ ORDER : trades
    SYMBOL ||--o{ POSITION : holds

    STRATEGY ||--o{ ORDER : creates
    STRATEGY ||--o{ POSITION : manages

    ORDER ||--o{ TRADE : generates
    ORDER }|--|| POSITION : opens

    STRATEGY ||--o{ LOG : records
```

### 5.2 æ•°æ®æµ

**å®æ—¶æ•°æ®æµ:**
```
äº¤æ˜“æ‰€WebSocket â†’ å®æ—¶ä»·æ ¼ â†’ ç­–ç•¥å¼•æ“ â†’ äº¤æ˜“ä¿¡å· â†’ é£é™©ç®¡ç† â†’ è®¢å•æ‰§è¡Œ â†’ æ•°æ®åº“
                                              â†“
                                         é’‰é’‰é€šçŸ¥
```

**å†å²æ•°æ®æµ:**
```
äº¤æ˜“æ‰€REST API â†’ Kçº¿æ•°æ® â†’ æ•°æ®æ¸…æ´— â†’ æ•°æ®åº“ â†’ å›æµ‹å¼•æ“
```

### 5.3 æ•°æ®å­˜å‚¨

**å­˜å‚¨ç­–ç•¥:**
- çƒ­æ•°æ®(3ä¸ªæœˆ): SQLiteæ•°æ®åº“
- å†·æ•°æ®(3-6ä¸ªæœˆ): å‹ç¼©çš„CSVæ–‡ä»¶
- å½’æ¡£æ•°æ®(6ä¸ªæœˆ+): åˆ é™¤æˆ–äº‘å­˜å‚¨

**å¤‡ä»½ç­–ç•¥:**
- æ¯æ—¥å‡Œæ™¨3ç‚¹è‡ªåŠ¨å¤‡ä»½
- ä¿ç•™æœ€è¿‘7å¤©å¤‡ä»½
- å¤‡ä»½æ–‡ä»¶å‘½å: `backup_YYYYMMDD.db`

---

## 6. æ¥å£ä¸é›†æˆ

### 6.1 å†…éƒ¨æ¥å£

**ç­–ç•¥å¼•æ“æ¥å£:**
```python
class StrategyEngine(ABC):
    @abstractmethod
    def on_bar(self, bar: Bar) -> Optional[Signal]:
        """Kçº¿æ•°æ®å›è°ƒ"""

    @abstractmethod
    def on_tick(self, tick: Tick) -> Optional[Signal]:
        """å®æ—¶ä»·æ ¼å›è°ƒ"""

    @abstractmethod
    def on_order(self, order: Order):
        """è®¢å•çŠ¶æ€å›è°ƒ"""
```

**é£é™©ç®¡ç†æ¥å£:**
```python
class RiskManager:
    def check_signal(self, signal: Signal) -> tuple[bool, str]:
        """æ£€æŸ¥äº¤æ˜“ä¿¡å·"""

    def check_order(self, order: Order) -> tuple[bool, str]:
        """æ£€æŸ¥è®¢å•"""
```

### 6.2 å¤–éƒ¨æ¥å£

**CCXTç»Ÿä¸€æ¥å£:**
```python
import ccxt

exchange = ccxt.binance({
    'apiKey': 'your_key',
    'secret': 'your_secret',
})

# è·å–ä»·æ ¼
ticker = exchange.fetch_ticker('BTC/USDT')

# åˆ›å»ºè®¢å•
order = exchange.create_market_buy_order('BTC/USDT', 0.001)
```

### 6.3 APIè§„èŒƒ

**REST APIè§„èŒƒ (å¦‚éœ€è¦):**
- éµå¾ªRESTfulè®¾è®¡
- ä½¿ç”¨JWTè®¤è¯
- ç»Ÿä¸€å“åº”æ ¼å¼:
```json
{
    "code": 200,
    "message": "success",
    "data": {}
}
```

---

## 7. ç³»ç»Ÿæ¶æ„å»ºè®®

### 7.1 æŠ€æœ¯æ¶æ„

```mermaid
graph TB
    subgraph "ç”¨æˆ·å±‚"
        A1[CLIå‘½ä»¤è¡Œ]
        A2[Webç•Œé¢]
    end

    subgraph "åº”ç”¨å±‚"
        B1[ç­–ç•¥è°ƒåº¦å™¨]
        B2[é£é™©ç®¡ç†å™¨]
        B3[è®¢å•æ‰§è¡Œå¼•æ“]
        B4[é€šçŸ¥æœåŠ¡]
    end

    subgraph "ç­–ç•¥å±‚"
        C1[è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥]
        C2[ç½‘æ ¼äº¤æ˜“ç­–ç•¥]
        C3[å¥—åˆ©ç­–ç•¥]
    end

    subgraph "æ•°æ®å±‚"
        D1[SQLiteæ•°æ®åº“]
        D2[æ–‡ä»¶å­˜å‚¨]
        D3[é…ç½®æ–‡ä»¶]
    end

    subgraph "å¤–éƒ¨æœåŠ¡"
        E1[å¸å®‰äº¤æ˜“æ‰€]
        E2[æ¬§æ˜“äº¤æ˜“æ‰€]
        E3[é’‰é’‰æœºå™¨äºº]
    end

    A1 --> B1
    A2 --> B1

    B1 --> C1
    B1 --> C2
    B1 --> C3

    C1 --> B2
    C2 --> B2
    C3 --> B2

    B2 --> B3
    B3 --> E1
    B3 --> E2

    B2 --> B4
    B4 --> E3

    B1 --> D1
    B1 --> D2
    B1 --> D3
```

### 7.2 ç›®å½•ç»“æ„

```
ntV1/
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml           # ä¸»é…ç½®
â”‚   â”œâ”€â”€ strategies/           # ç­–ç•¥é…ç½®
â”‚   â”‚   â”œâ”€â”€ trend_following.yaml
â”‚   â”‚   â””â”€â”€ grid_trading.yaml
â”‚   â””â”€â”€ risk.yaml             # é£é™©é…ç½®
â”œâ”€â”€ src/                      # æºä»£ç 
â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ exchange.py      # äº¤æ˜“æ‰€è¿æ¥
â”‚   â”‚   â”œâ”€â”€ engine.py        # ç­–ç•¥å¼•æ“
â”‚   â”‚   â”œâ”€â”€ risk.py          # é£é™©ç®¡ç†
â”‚   â”‚   â””â”€â”€ order.py         # è®¢å•æ‰§è¡Œ
â”‚   â”œâ”€â”€ strategies/          # ç­–ç•¥å®ç°
â”‚   â”‚   â”œâ”€â”€ trend_following.py
â”‚   â”‚   â”œâ”€â”€ grid_trading.py
â”‚   â”‚   â””â”€â”€ base.py          # ç­–ç•¥åŸºç±»
â”‚   â”œâ”€â”€ data/                # æ•°æ®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ database.py
â”‚   â”‚   â”œâ”€â”€ sync.py
â”‚   â”‚   â””â”€â”€ models.py
â”‚   â”œâ”€â”€ services/            # æœåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ notification.py
â”‚   â”‚   â””â”€â”€ logger.py
â”‚   â”œâ”€â”€ web/                 # Webç•Œé¢
â”‚   â”‚   â””â”€â”€ app.py
â”‚   â””â”€â”€ cli/                 # å‘½ä»¤è¡Œå·¥å…·
â”‚       â””â”€â”€ main.py
â”œâ”€â”€ data/                    # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ history/            # å†å²æ•°æ®
â”‚   â”œâ”€â”€ backup/             # å¤‡ä»½æ–‡ä»¶
â”‚   â””â”€â”€ logs/               # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ tests/                   # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ test_strategies.py
â”‚   â”œâ”€â”€ test_risk.py
â”‚   â””â”€â”€ test_exchange.py
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â”‚   â”œâ”€â”€ requirements/       # éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ api/               # APIæ–‡æ¡£
â”‚   â””â”€â”€ user/              # ç”¨æˆ·æ‰‹å†Œ
â”œâ”€â”€ scripts/                # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ setup.sh           # å®‰è£…è„šæœ¬
â”‚   â””â”€â”€ start.sh           # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ requirements.txt        # ä¾èµ–åº“
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜
â””â”€â”€ main.py                # ä¸»å…¥å£
```

### 7.3 æŠ€æœ¯é€‰å‹

| ç±»åˆ« | æŠ€æœ¯é€‰å‹ | ç†ç”± |
|------|----------|------|
| ç¼–ç¨‹è¯­è¨€ | Python 3.11 | ç®€å•æ˜“å­¦,åº“ä¸°å¯Œ |
| äº¤æ˜“æ‰€æ¥å£ | CCXT 4.0 | ç»Ÿä¸€æ¥å£,æ”¯æŒ100+äº¤æ˜“æ‰€ |
| Webæ¡†æ¶ | Streamlit | å¿«é€Ÿå¼€å‘,é€‚åˆæ•°æ®å±•ç¤º |
| æ•°æ®åº“ | SQLite | è½»é‡,æ— éœ€é¢å¤–æœåŠ¡ |
| ORM | SQLAlchemy | æˆç†Ÿç¨³å®šçš„Python ORM |
| æ•°æ®å¤„ç† | Pandas | å¼ºå¤§çš„æ•°æ®åˆ†æåº“ |
| æ—¥å¿—ç®¡ç† | Loguru | ç®€å•æ˜“ç”¨çš„æ—¥å¿—åº“ |
| CLIæ¡†æ¶ | Click | ä¼˜é›…çš„å‘½ä»¤è¡Œå·¥å…· |
| é…ç½®ç®¡ç† | PyYAML | YAMLé…ç½®æ–‡ä»¶ |
| å®šæ—¶ä»»åŠ¡ | Schedule | ç®€å•çš„å®šæ—¶ä»»åŠ¡ |
| åŠ å¯†åº“ | Cryptography | å®‰å…¨çš„åŠ å¯†åº“ |

---

## 8. ç”¨æˆ·ä½“éªŒè®¾è®¡

### 8.1 äº¤äº’åŸåˆ™

1. **ç®€å•æ€§**
   - é»˜è®¤é…ç½®å¼€ç®±å³ç”¨
   - å‡å°‘å¿…éœ€é…ç½®é¡¹
   - æä¾›é…ç½®æ¨¡æ¿

2. **åé¦ˆåŠæ—¶**
   - æ¯ä¸ªæ“ä½œéƒ½æœ‰åé¦ˆ
   - é”™è¯¯ä¿¡æ¯æ¸…æ™°æ˜ç¡®
   - è¿›åº¦å®æ—¶æ˜¾ç¤º

3. **å®¹é”™æ€§**
   - é…ç½®éªŒè¯æç¤º
   - å±é™©æ“ä½œäºŒæ¬¡ç¡®è®¤
   - æ“ä½œå¯æ’¤é”€

### 8.2 ç•Œé¢è¦æ±‚

**CLIç•Œé¢:**
- å½©è‰²è¾“å‡º,ä¿¡æ¯åˆ†çº§
- è¿›åº¦æ¡æ˜¾ç¤º
- è¡¨æ ¼æ ¼å¼åŒ–å±•ç¤º
- è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½

**Webç•Œé¢:**
- å“åº”å¼è®¾è®¡
- æš—è‰²ä¸»é¢˜(é€‚åˆé•¿æ—¶é—´ç›‘æ§)
- å®æ—¶æ•°æ®åˆ·æ–°
- ç§»åŠ¨ç«¯é€‚é…

### 8.3 é”™è¯¯å¤„ç†

**é”™è¯¯æç¤ºæ ¼å¼:**
```
âŒ é”™è¯¯: è®¢å•åˆ›å»ºå¤±è´¥
ğŸ“ ä½ç½®: OrderEngine.create_order()
ğŸ’¡ åŸå› : ä½™é¢ä¸è¶³
ğŸ”§ å»ºè®®: æ£€æŸ¥è´¦æˆ·ä½™é¢æˆ–å‡å°‘è®¢å•æ•°é‡
ğŸ“Š å½“å‰ä½™é¢: $1000
ğŸ“Š è®¢å•é‡‘é¢: $1200
```

**å¸¸è§é”™è¯¯å¤„ç†:**
- ç½‘ç»œé”™è¯¯: è‡ªåŠ¨é‡è¯•3æ¬¡,é—´éš”5ç§’
- APIé™æµ: ç­‰å¾…åé‡è¯•
- ä½™é¢ä¸è¶³: å‘é€å‘Šè­¦,è·³è¿‡æœ¬æ¬¡äº¤æ˜“
- å‚æ•°é”™è¯¯: æç¤ºæ­£ç¡®æ ¼å¼

---

## 9. éªŒæ”¶æ ‡å‡†

### 9.1 åŠŸèƒ½éªŒæ”¶

**å¿…é¡»æ»¡è¶³:**
- âœ… èƒ½å¤Ÿè¿æ¥å¸å®‰å’Œæ¬§æ˜“
- âœ… è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥èƒ½æ­£å¸¸è¿è¡Œ
- âœ… ç½‘æ ¼äº¤æ˜“ç­–ç•¥èƒ½æ­£å¸¸è¿è¡Œ
- âœ… é£é™©ç®¡ç†èƒ½æœ‰æ•ˆæ§åˆ¶é£é™©
- âœ… é’‰é’‰é€šçŸ¥èƒ½æ­£å¸¸å‘é€
- âœ… CLIå·¥å…·èƒ½ç®¡ç†ç­–ç•¥
- âœ… æ•°æ®èƒ½æ­£ç¡®å­˜å‚¨åˆ°æ•°æ®åº“
- âœ… ç³»ç»Ÿèƒ½ç¨³å®šè¿è¡Œ24å°æ—¶

### 9.2 æ€§èƒ½éªŒæ”¶

**å¿…é¡»æ»¡è¶³:**
- âœ… è®¢å•æ‰§è¡Œå»¶è¿Ÿ < 1ç§’
- âœ… å†…å­˜å ç”¨ < 500MB
- âœ… CPUå ç”¨ < 20%
- âœ… APIè°ƒç”¨æˆåŠŸç‡ > 99%

### 9.3 è´¨é‡éªŒæ”¶

**å¿…é¡»æ»¡è¶³:**
- âœ… ä»£ç ç¬¦åˆPEP 8è§„èŒƒ
- âœ… å…³é”®æ¨¡å—æœ‰å•å…ƒæµ‹è¯•
- âœ… æµ‹è¯•è¦†ç›–ç‡ > 70%
- âœ… æ— Criticalçº§åˆ«çš„ä»£ç é—®é¢˜
- âœ… æ–‡æ¡£å®Œæ•´

---

## 10. æˆåŠŸæŒ‡æ ‡

### 10.1 ä¸šåŠ¡æŒ‡æ ‡

**çŸ­æœŸç›®æ ‡ (3ä¸ªæœˆ):**
- ç³»ç»Ÿç¨³å®šè¿è¡Œ,æ— é‡å¤§æ•…éšœ
- å®Œæˆè‡³å°‘100ç¬”äº¤æ˜“
- ç­–ç•¥æ”¶ç›Šç‡ > 5%

**ä¸­æœŸç›®æ ‡ (6ä¸ªæœˆ):**
- ç­–ç•¥æ”¶ç›Šç‡ > 15%
- æœ€å¤§å›æ’¤ < 10%
- å¤æ™®æ¯”ç‡ > 1.5

**é•¿æœŸç›®æ ‡ (12ä¸ªæœˆ):**
- ç­–ç•¥æ”¶ç›Šç‡ > 30%
- å»ºç«‹ç¨³å®šçš„äº¤æ˜“ä½“ç³»
- èƒ½å¤Ÿç‹¬ç«‹ä¼˜åŒ–ç­–ç•¥

### 10.2 äº§å“æŒ‡æ ‡

- ç³»ç»Ÿå¯ç”¨æ€§ > 99%
- è®¢å•æ‰§è¡ŒæˆåŠŸç‡ > 98%
- å‡é˜³æ€§ç‡ < 5%

### 10.3 æŠ€æœ¯æŒ‡æ ‡

- ä»£ç æµ‹è¯•è¦†ç›–ç‡ > 70%
- å¹³å‡ä¿®å¤æ—¶é—´ < 4å°æ—¶
- æ–°åŠŸèƒ½è¿­ä»£å‘¨æœŸ < 2å‘¨

---

## 11. é£é™©è¯„ä¼°

### 11.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| APIé™æµ | é«˜ | ä¸­ | å®ç°è¯·æ±‚é˜Ÿåˆ—,é™ä½é¢‘ç‡ |
| ç½‘ç»œä¸ç¨³å®š | ä¸­ | é«˜ | å¤šé‡é‡è¿æœºåˆ¶,æœ¬åœ°ç¼“å­˜ |
| äº¤æ˜“æ‰€ç»´æŠ¤ | ä¸­ | ä¸­ | ç›‘æ§å…¬å‘Š,æå‰æš‚åœ |
| æ•°æ®ä¸¢å¤± | é«˜ | ä½ | å®šæœŸå¤‡ä»½,æ•°æ®æŒä¹…åŒ– |

### 11.2 ä¸šåŠ¡é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| ç­–ç•¥äºæŸ | é«˜ | ä¸­ | ä¸¥æ ¼é£æ§,å°èµ„é‡‘æµ‹è¯• |
| å¸‚åœºæç«¯è¡Œæƒ… | é«˜ | ä½ | è®¾ç½®ç†”æ–­æœºåˆ¶ |
| äº¤æ˜“æ‰€å€’é—­ | é«˜ | æä½ | åˆ†æ•£èµ„é‡‘,é€‰æ‹©å¤§æ‰€ |
| APIå¯†é’¥æ³„éœ² | é«˜ | ä½ | åŠ å¯†å­˜å‚¨,IPç™½åå• |

### 11.3 èµ„æºé£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| æœåŠ¡å™¨æˆæœ¬ | ä½ | é«˜ | ä¼˜åŒ–èµ„æº,é€‰æ‹©åˆé€‚é…ç½® |
| å¼€å‘æ—¶é—´å»¶æœŸ | ä¸­ | ä¸­ | åˆ†é˜¶æ®µäº¤ä»˜,ä¼˜å…ˆæ ¸å¿ƒåŠŸèƒ½ |

---

## 12. å¼€å‘è·¯çº¿å›¾

### 12.1 é‡Œç¨‹ç¢‘

```mermaid
gantt
    title é‡åŒ–äº¤æ˜“ç³»ç»Ÿå¼€å‘è®¡åˆ’
    dateFormat  YYYY-MM-DD
    section ç¬¬ä¸€é˜¶æ®µ (MVP)
    ç¯å¢ƒæ­å»º           :done, env, 2026-01-18, 3d
    äº¤æ˜“æ‰€è¿æ¥æ¨¡å—      :exg, after env, 7d
    æ•°æ®ç®¡ç†æ¨¡å—       :data, after env, 7d
    é£é™©ç®¡ç†æ¨¡å—       :risk, after data, 5d
    è®¢å•æ‰§è¡Œå¼•æ“       :order, after risk, 5d
    è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥       :trend, after order, 7d
    ç½‘æ ¼äº¤æ˜“ç­–ç•¥       :grid, after trend, 7d
    é€šçŸ¥æœåŠ¡          :notify, after grid, 3d
    CLIå·¥å…·          :cli, after notify, 5d
    é›†æˆæµ‹è¯•          :test1, after cli, 5d

    section ç¬¬äºŒé˜¶æ®µ (v1.1)
    Webç›‘æ§ç•Œé¢       :web, after test1, 10d
    å›æµ‹åŠŸèƒ½         :backtest, after web, 7d
    å‚æ•°ä¼˜åŒ–         :optimize, after backtest, 5d
    é›†æˆæµ‹è¯•          :test2, after optimize, 5d

    section ç¬¬ä¸‰é˜¶æ®µ (v2.0)
    å¥—åˆ©ç­–ç•¥         :arbitrage, after test2, 15d
    é«˜çº§åŠŸèƒ½         :advanced, after arbitrage, 10d
    å‹åŠ›æµ‹è¯•          :test3, after advanced, 5d
```

### 12.2 åˆ†é˜¶æ®µç­–ç•¥

**ç¬¬ä¸€é˜¶æ®µ (MVP) - 1.5ä¸ªæœˆ**
**ç›®æ ‡**: å®ç°åŸºç¡€äº¤æ˜“åŠŸèƒ½
**äº¤ä»˜ç‰©**:
- äº¤æ˜“æ‰€è¿æ¥æ¨¡å—
- è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥
- ç½‘æ ¼äº¤æ˜“ç­–ç•¥
- é£é™©ç®¡ç†æ¨¡å—
- è®¢å•æ‰§è¡Œå¼•æ“
- é’‰é’‰é€šçŸ¥æœåŠ¡
- CLIå‘½ä»¤è¡Œå·¥å…·
- åŸºç¡€æ–‡æ¡£

**éªŒæ”¶æ ‡å‡†**:
- èƒ½å¤Ÿæ‰§è¡Œè‡ªåŠ¨äº¤æ˜“
- é£é™©æ§åˆ¶æœ‰æ•ˆ
- é€šçŸ¥æ­£å¸¸å‘é€
- ç¨³å®šè¿è¡Œ24å°æ—¶

---

**ç¬¬äºŒé˜¶æ®µ (v1.1) - 1ä¸ªæœˆ**
**ç›®æ ‡**: å¢å¼ºç”¨æˆ·ä½“éªŒ
**äº¤ä»˜ç‰©**:
- Webç›‘æ§ç•Œé¢
- å›æµ‹åŠŸèƒ½
- å‚æ•°ä¼˜åŒ–
- è¯¦ç»†ç»Ÿè®¡æŠ¥è¡¨
- å®Œå–„æ–‡æ¡£

**éªŒæ”¶æ ‡å‡†**:
- Webç•Œé¢å‹å¥½æ˜“ç”¨
- å›æµ‹ç»“æœå‡†ç¡®
- å‚æ•°ä¼˜åŒ–æœ‰æ•ˆ

---

**ç¬¬ä¸‰é˜¶æ®µ (v2.0) - 1.5ä¸ªæœˆ**
**ç›®æ ‡**: é«˜çº§åŠŸèƒ½
**äº¤ä»˜ç‰©**:
- å¥—åˆ©ç­–ç•¥
- å¤šç­–ç•¥ç»„åˆ
- ç§»åŠ¨ç«¯é€šçŸ¥
- æ€§èƒ½ä¼˜åŒ–
- ç¤¾åŒºæ”¯æŒ

**éªŒæ”¶æ ‡å‡†**:
- å¥—åˆ©ç­–ç•¥ç¨³å®šç›ˆåˆ©
- ç³»ç»Ÿæ€§èƒ½æå‡30%

---

## 13. éƒ¨ç½²æŒ‡å—

### 13.1 ç¯å¢ƒå‡†å¤‡

**ç³»ç»Ÿè¦æ±‚:**
- æ“ä½œç³»ç»Ÿ: Ubuntu 22.04 LTS
- Python: 3.11+
- å†…å­˜: 2GB+
- ç£ç›˜: 10GB+

**å®‰è£…æ­¥éª¤:**
```bash
# 1. å…‹éš†ä»£ç 
git clone https://github.com/your-repo/ntV1.git
cd ntV1

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3.11 -m venv venv
source venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶,å¡«å…¥APIå¯†é’¥

# 5. åˆå§‹åŒ–æ•°æ®åº“
python main.py init

# 6. éªŒè¯é…ç½®
python main.py config validate

# 7. å¯åŠ¨ç³»ç»Ÿ
python main.py system start
```

### 13.2 äº‘æœåŠ¡å™¨éƒ¨ç½²

**é˜¿é‡Œäº‘é…ç½®:**
- å®ä¾‹è§„æ ¼: 2æ ¸4GB
- æ“ä½œç³»ç»Ÿ: Ubuntu 22.04
- å¸¦å®½: 1Mbps
- æˆæœ¬: çº¦Â¥100/æœˆ

**å®‰å…¨ç»„é…ç½®:**
```
å…¥æ–¹å‘:
- SSH: 22 (ä½ çš„IP)
- HTTP: 80 (ä»»æ„)
- HTTPS: 443 (ä»»æ„)

å‡ºæ–¹å‘:
- å…¨éƒ¨æ”¾è¡Œ
```

**ä½¿ç”¨Supervisorç®¡ç†è¿›ç¨‹:**
```ini
[program:quant_trading]
command=/home/ubuntu/ntV1/venv/bin/python main.py system start
directory=/home/ubuntu/ntV1
user=ubuntu
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/quant_trading.log
```

### 13.3 Dockeréƒ¨ç½² (å¯é€‰)

**Dockerfile:**
```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

CMD ["python", "main.py", "system", "start"]
```

**docker-compose.yml:**
```yaml
version: '3.8'
services:
  quant-trading:
    build: .
    volumes:
      - ./config:/app/config
      - ./data:/app/data
    env_file:
      - .env
    restart: always
```

---

## 14. è¿ç»´æ‰‹å†Œ

### 14.1 æ—¥å¸¸ç»´æŠ¤

**æ¯æ—¥æ£€æŸ¥:**
```bash
# 1. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
python main.py system status

# 2. æŸ¥çœ‹ä»Šæ—¥æ”¶ç›Š
python main.py profit summary

# 3. æ£€æŸ¥é”™è¯¯æ—¥å¿—
python main.py logs --level ERROR --tail 50
```

**æ¯å‘¨ç»´æŠ¤:**
```bash
# 1. æ•°æ®åº“å¤‡ä»½
python main.py backup create

# 2. æ€§èƒ½åˆ†æ
python main.py analyze performance

# 3. ç­–ç•¥ä¼˜åŒ–
python main.py optimize --strategy trend_following
```

**æ¯æœˆç»´æŠ¤:**
```bash
# 1. æ¸…ç†æ—§æ—¥å¿—
python main.py logs --cleanup --days 30

# 2. æ›´æ–°ä¾èµ–
pip install --upgrade -r requirements.txt

# 3. APIå¯†é’¥è½®æ¢
# åœ¨äº¤æ˜“æ‰€é‡æ–°ç”Ÿæˆå¯†é’¥,æ›´æ–°é…ç½®
```

### 14.2 æ•…éšœæ’æŸ¥

**å¸¸è§é—®é¢˜:**

**1. è®¢å•æ‰§è¡Œå¤±è´¥**
```bash
# æ£€æŸ¥ä½™é¢
python main.py balance

# æ£€æŸ¥APIæƒé™
# ç™»å½•äº¤æ˜“æ‰€ç¡®è®¤æƒé™è®¾ç½®

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
python main.py logs --filter "order failed"
```

**2. ç½‘ç»œè¿æ¥å¼‚å¸¸**
```bash
# æµ‹è¯•äº¤æ˜“æ‰€è¿æ¥
python main.py test connection --exchange binance

# æ£€æŸ¥ç½‘ç»œ
ping api.binance.com

# æŸ¥çœ‹é‡è¿æ—¥å¿—
python main.py logs --filter "reconnect"
```

**3. ç­–ç•¥å¼‚å¸¸åœæ­¢**
```bash
# æŸ¥çœ‹ç­–ç•¥æ—¥å¿—
python main.py logs --strategy trend_following

# æ£€æŸ¥é£é™©è§¦å‘
python main.py risk check

# é‡å¯ç­–ç•¥
python main.py strategy restart --id trend_following_001
```

### 14.3 ç›‘æ§å‘Šè­¦

**å¥åº·æ£€æŸ¥è„šæœ¬:**
```bash
#!/bin/bash
# health_check.sh

# æ£€æŸ¥è¿›ç¨‹
if ! pgrep -f "main.py system start" > /dev/null; then
    echo "è¿›ç¨‹æœªè¿è¡Œ,æ­£åœ¨é‡å¯..."
    python main.py system start
fi

# æ£€æŸ¥å†…å­˜
MEMORY=$(ps aux | grep 'main.py' | awk '{sum+=$4} END {print sum}')
if (( $(echo "$MEMORY > 80" | bc -l) )); then
    echo "å†…å­˜ä½¿ç”¨è¿‡é«˜: $MEMORY%"
    # å‘é€å‘Šè­¦
fi

# æ£€æŸ¥ç£ç›˜
DISK=$(df -h | grep '/$' | awk '{print $5}' | sed 's/%//')
if [ $DISK -gt 80 ]; then
    echo "ç£ç›˜ç©ºé—´ä¸è¶³: $DISK%"
    # æ¸…ç†æ—¥å¿—
    python main.py logs --cleanup --days 7
fi
```

**å®šæ—¶ä»»åŠ¡:**
```bash
# æ·»åŠ åˆ°crontab
crontab -e

# æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
*/5 * * * * /home/ubuntu/ntV1/scripts/health_check.sh

# æ¯æ—¥å‡Œæ™¨3ç‚¹æ•°æ®åŒæ­¥
0 3 * * * /home/ubuntu/ntV1/venv/bin/python main.py data sync

# æ¯æ—¥å‡Œæ™¨4ç‚¹å¤‡ä»½
0 4 * * * /home/ubuntu/ntV1/venv/bin/python main.py backup create
```

---

## 15. å¿«é€Ÿå¼€å§‹æŒ‡å—

### 15.1 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

**æ­¥éª¤1: è·å–APIå¯†é’¥**
```bash
# å¸å®‰: è´¦æˆ·ç®¡ç† -> APIç®¡ç† -> åˆ›å»ºAPI
# æƒé™: ç°è´§äº¤æ˜“ã€è¯»å–
# é™åˆ¶: IPç™½åå•ã€ç¦ç”¨æç°

# æ¬§æ˜“: èµ„äº§ç®¡ç† -> APIç®¡ç† -> åˆ›å»ºAPI
# æƒé™: äº¤æ˜“ã€è¯»å–
# é™åˆ¶: IPç™½åå•ã€ç¦ç”¨æç°
```

**æ­¥éª¤2: é…ç½®ç³»ç»Ÿ**
```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘é…ç½®
vim .env
```

```env
# .env æ–‡ä»¶å†…å®¹
BINANCE_API_KEY=your_binance_api_key
BINANCE_API_SECRET=your_binance_api_secret
OKX_API_KEY=your_okx_api_key
OKX_API_SECRET=your_okx_api_secret
OKX_PASSPHRASE=your_okx_passphrase

DINGTALK_WEBHOOK=https://oapi.dingtalk.com/robot/send?access_token=xxx
DINGTALK_SECRET=SEC***

DATABASE_URL=sqlite:///data/trading.db
LOG_LEVEL=INFO
```

**æ­¥éª¤3: éªŒè¯è¿æ¥**
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# éªŒè¯é…ç½®
python main.py config validate

# æµ‹è¯•è¿æ¥
python main.py test connection
```

**æ­¥éª¤4: å¯åŠ¨ç­–ç•¥**
```bash
# å¯åŠ¨è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥
python main.py strategy start --name trend_following

# æŸ¥çœ‹ç­–ç•¥çŠ¶æ€
python main.py strategy list

# æŸ¥çœ‹æŒä»“
python main.py position list
```

**æ­¥éª¤5: ç›‘æ§ç³»ç»Ÿ**
```bash
# å¯åŠ¨Webç•Œé¢(å¦å¼€ç»ˆç«¯)
streamlit run web/app.py

# è®¿é—® http://localhost:8501
```

### 15.2 ç¬¬ä¸€ä¸ªç­–ç•¥é…ç½®

**ç¼–è¾‘è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥é…ç½®:**
```yaml
# config/strategies/trend_following.yaml
strategy:
  name: "æˆ‘çš„ç¬¬ä¸€ä¸ªè¶‹åŠ¿ç­–ç•¥"
  type: "trend_following"
  enabled: true

symbols:
  - BTC/USDT

timeframe: 4h

indicators:
  ema_fast: 12
  ema_slow: 26
  rsi_period: 14

risk:
  position_size: 0.1    # 10%ä»“ä½,æ–°æ‰‹å»ºè®®5%
  stop_loss: 0.03       # 3%æ­¢æŸ
  take_profit: 0.06     # 6%æ­¢ç›ˆ

notifications:
  dingtalk: true
```

**å¯åŠ¨å¹¶è§‚å¯Ÿ:**
```bash
# å¯åŠ¨ç­–ç•¥
python main.py strategy start --config config/strategies/trend_following.yaml

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
python main.py logs --follow

# ç­‰å¾…ä¿¡å·(å¯èƒ½éœ€è¦å‡ å°æ—¶æˆ–å‡ å¤©)
# å½“ä¿¡å·è§¦å‘æ—¶,ä¼šæ”¶åˆ°é’‰é’‰é€šçŸ¥
```

### 15.3 æ–°æ‰‹æ³¨æ„äº‹é¡¹

**é‡è¦æç¤º:**
âš ï¸ **ä»å°èµ„é‡‘å¼€å§‹**: å»ºè®®å…ˆç”¨$100-500æµ‹è¯•
âš ï¸ **å……åˆ†å›æµ‹**: å®ç›˜å‰åŠ¡å¿…å›æµ‹
âš ï¸ **ç›‘æ§é£é™©**: æ¯å¤©æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
âš ï¸ **ç†è§£ç­–ç•¥**: ä¸è¦è¿è¡Œä¸ç†è§£çš„ç­–ç•¥
âš ï¸ **ä¿æŒå­¦ä¹ **: æŒç»­ä¼˜åŒ–å’Œæ”¹è¿›

**æ–°æ‰‹å»ºè®®:**
1. ç¬¬ä¸€ä¸ªæœˆ: ç†Ÿæ‚‰ç³»ç»Ÿ,å°é¢æµ‹è¯•
2. ç¬¬äºŒä¸ªæœˆ: å›æµ‹ä¼˜åŒ–,è°ƒæ•´å‚æ•°
3. ç¬¬ä¸‰ä¸ªæœˆ: é€æ­¥å¢åŠ èµ„é‡‘

---

## 16. æœ¯è¯­è¡¨

| æœ¯è¯­ | è‹±æ–‡ | è§£é‡Š |
|------|------|------|
| Kçº¿ | Candlestick | è®°å½•ä»·æ ¼å¼€é«˜ä½æ”¶çš„å›¾è¡¨ |
| EMA | Exponential Moving Average | æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿ |
| MACD | Moving Average Convergence Divergence | å¹³æ»‘å¼‚åŒç§»åŠ¨å¹³å‡çº¿ |
| RSI | Relative Strength Index | ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡ |
| ATR | Average True Range | å¹³å‡çœŸå®æ³¢å¹… |
| ç½‘æ ¼äº¤æ˜“ | Grid Trading | åœ¨ä»·æ ¼åŒºé—´å†…åˆ†æ‰¹ä¹°å– |
| å¥—åˆ© | Arbitrage | åˆ©ç”¨ä»·å·®èµšå–æ— é£é™©æ”¶ç›Š |
| å›æµ‹ | Backtesting | ç”¨å†å²æ•°æ®éªŒè¯ç­–ç•¥ |
| å¤æ™®æ¯”ç‡ | Sharpe Ratio | è¡¡é‡é£é™©è°ƒæ•´åæ”¶ç›Š |
| å›æ’¤ | Drawdown | ä»å³°å€¼åˆ°è°·å€¼çš„è·Œå¹… |
| æ»‘ç‚¹ | Slippage | é¢„æœŸä»·æ ¼ä¸å®é™…æˆäº¤ä»·ä¹‹å·® |
| ä»“ä½ | Position | æŒæœ‰çš„èµ„é‡‘æ•°é‡ |
| åšå¤š | Long | é¢„æœŸä»·æ ¼ä¸Šæ¶¨ä¹°å…¥ |
| åšç©º | Short | é¢„æœŸä»·æ ¼ä¸‹è·Œå–å‡º |
| æ­¢æŸ | Stop Loss | é™åˆ¶äºæŸçš„è®¢å• |
| æ­¢ç›ˆ | Take Profit | é”å®šåˆ©æ¶¦çš„è®¢å• |

---

## 17. é™„å½•

### 17.1 å‚è€ƒèµ„æ–™

**æŠ€æœ¯æ–‡æ¡£:**
- [CCXTå®˜æ–¹æ–‡æ¡£](https://docs.ccxt.com/)
- [å¸å®‰APIæ–‡æ¡£](https://binance-docs.github.io/apidocs/)
- [æ¬§æ˜“APIæ–‡æ¡£](https://www.okx.com/docs-v5/)
- [Pythonå®˜æ–¹æ–‡æ¡£](https://docs.python.org/3.11/)

**æ¨èä¹¦ç±:**
- ã€Šé‡åŒ–äº¤æ˜“:å¦‚ä½•å»ºç«‹è‡ªå·±çš„ç®—æ³•äº¤æ˜“ã€‹
- ã€ŠPythoné‡‘èå¤§æ•°æ®åˆ†æã€‹
- ã€ŠåŠ å¯†è´§å¸æŠ•èµ„ç­–ç•¥ã€‹

**ç¤¾åŒºèµ„æº:**
- CCXTç¤¾åŒºè®ºå›
- r/algotrading (Reddit)
- é‡åŒ–äº¤æ˜“å¾®ä¿¡ç¾¤

### 17.2 å¸¸è§é—®é¢˜ (FAQ)

**Q1: ç³»ç»Ÿèƒ½ä¿è¯ç›ˆåˆ©å—?**
A: ä¸èƒ½ã€‚é‡åŒ–äº¤æ˜“åªæ˜¯å·¥å…·,ç›ˆäºå–å†³äºç­–ç•¥è´¨é‡å’Œå¸‚åœºç¯å¢ƒã€‚è¯·ä»å°èµ„é‡‘å¼€å§‹æµ‹è¯•ã€‚

**Q2: éœ€è¦å¤šå°‘èµ„é‡‘å¼€å§‹?**
A: å»ºè®®è‡³å°‘$500-$1000ã€‚å¤ªå°‘æ‰‹ç»­è´¹å æ¯”é«˜,å¤ªå¤šé£é™©å¤§ã€‚

**Q3: å¯ä»¥åŒæ—¶è¿è¡Œå¤šå°‘ä¸ªç­–ç•¥?**
A: ç†è®ºä¸Šæ— é™åˆ¶,å»ºè®®2-3ä¸ªã€‚å¤ªå¤šéš¾ä»¥ç›‘æ§ã€‚

**Q4: ç³»ç»Ÿå®‰å…¨å—?**
A: APIå¯†é’¥åŠ å¯†å­˜å‚¨,ç¦ç”¨æç°æƒé™,IPç™½åå•,ç›¸å¯¹å®‰å…¨ã€‚

**Q5: éœ€è¦ä¸€ç›´å¼€ç€ç”µè„‘å—?**
A: å»ºè®®éƒ¨ç½²åœ¨äº‘æœåŠ¡å™¨,24/7è¿è¡Œã€‚

**Q6: å¦‚ä½•é€‰æ‹©äº¤æ˜“å¯¹?**
A: å»ºè®®é€‰æ‹©æµåŠ¨æ€§å¥½çš„ä¸»æµå¸: BTCã€ETHã€BNBç­‰ã€‚

**Q7: ç­–ç•¥ä¼šå¤±æ•ˆå—?**
A: ä¼šã€‚å¸‚åœºåœ¨å˜åŒ–,éœ€è¦æŒç»­ä¼˜åŒ–å’Œè°ƒæ•´ã€‚

**Q8: å¤šä¹…èƒ½å­¦ä¼š?**
A: åŸºç¡€ä½¿ç”¨1å‘¨,æ·±å…¥ç†è§£1-3ä¸ªæœˆã€‚

### 17.3 å˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| v1.0 | 2026-01-18 | åˆå§‹ç‰ˆæœ¬ | Claude Code |

---

## 18. æ€»ç»“

æœ¬PRDæ–‡æ¡£ä¸ºä¸ªäººé‡åŒ–äº¤æ˜“ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„éœ€æ±‚å®šä¹‰å’Œå®æ–½æ–¹æ¡ˆã€‚åŸºäºåˆå­¦è€…èƒŒæ™¯,æˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹è®¾è®¡åŸåˆ™:

1. **ç®€å•æ˜“ç”¨**: CLIä¸ºä¸»,é…ç½®æ–‡ä»¶é©±åŠ¨
2. **å®‰å…¨å¯é **: ä¸‰çº§é£é™©æ§åˆ¶,å®Œå–„çš„å¼‚å¸¸å¤„ç†
3. **åŠŸèƒ½å®Œæ•´**: æ”¯æŒä¸»æµç­–ç•¥,æ•°æ®ç®¡ç†å®Œå–„
4. **å¯æ‰©å±•æ€§**: æ¨¡å—åŒ–è®¾è®¡,æ˜“äºæ·»åŠ æ–°ç­–ç•¥
5. **æˆæœ¬å¯æ§**: å¼€æºæŠ€æœ¯æ ˆ,äº‘æœåŠ¡å™¨æˆæœ¬ä½

**æ ¸å¿ƒä»·å€¼:**
- è§£æ”¾äººåŠ›,24/7è‡ªåŠ¨äº¤æ˜“
- å…‹æœæƒ…ç»ª,ä¸¥æ ¼æ‰§è¡Œçºªå¾‹
- çµæ´»é…ç½®,é€‚åº”ä¸åŒå¸‚åœº
- é£é™©å¯æ§,ä¿æŠ¤æœ¬é‡‘å®‰å…¨

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨:**
1. ä»”ç»†é˜…è¯»æœ¬PRD,ç¡®è®¤éœ€æ±‚
2. å‡†å¤‡å¼€å‘ç¯å¢ƒå’ŒAPIå¯†é’¥
3. æŒ‰ç…§å¼€å‘è·¯çº¿å›¾å¼€å§‹MVPå¼€å‘
4. å°èµ„é‡‘æµ‹è¯•,é€æ­¥è¿­ä»£ä¼˜åŒ–

ç¥æ‚¨é‡åŒ–äº¤æ˜“ä¹‹æ—…é¡ºåˆ©! ğŸš€

---

**æ–‡æ¡£ç»“æŸ**

å¦‚æœ‰ç–‘é—®æˆ–éœ€è¦è¿›ä¸€æ­¥æ¾„æ¸…,è¯·éšæ—¶æå‡ºã€‚
